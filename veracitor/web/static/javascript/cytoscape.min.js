
/* cytoscape.min.js */

/**
 * This file is part of cytoscape.js 2.0.0beta2.
 * 
 * Cytoscape.js is free software: you can redistribute it and/or modify it
 * under the terms of the GNU Lesser General Public License as published by the Free
 * Software Foundation, either version 3 of the License, or (at your option) any
 * later version.
 * 
 * Cytoscape.js is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
 * FOR A PARTICULAR PURPOSE. See the GNU Lesser General Public License for more
 * details.
 * 
 * You should have received a copy of the GNU Lesser General Public License along with
 * cytoscape.js. If not, see <http://www.gnu.org/licenses/>.
 */
 
var cytoscape;(function(){var a=cytoscape=function(){return cytoscape.init.apply(cytoscape,arguments)};a.init=function(b){if(b===undefined){b={}}if(a.is.plainObject(b)){return new a.Core(b)}else{if(a.is.string(b)){return a.extension.apply(a.extension,arguments)}}};a.fn={};if(typeof exports!=="undefined"){exports=module.exports=cytoscape}})();(function(a){a.is={string:function(b){return b!=null&&typeof b==typeof""},fn:function(b){return b!=null&&typeof b===typeof function(){}},array:function(b){return b!=null&&b instanceof Array
},plainObject:function(b){return b!=null&&typeof b===typeof{}&&!a.is.array(b)&&b.constructor===Object},number:function(b){return b!=null&&typeof b===typeof 1&&!isNaN(b)},integer:function(b){return a.is.number(b)&&Math.floor(b)===b},color:function(b){return b!=null&&typeof b===typeof""&&$.Color(b).toString()!==""},bool:function(b){return b!=null&&typeof b===typeof true},elementOrCollection:function(b){return a.is.element(b)||a.is.collection(b)},element:function(b){return b instanceof a.Element&&b._private.single
},collection:function(b){return b instanceof a.Collection&&!b._private.single},core:function(b){return b instanceof a.Core},style:function(b){return b instanceof a.Style},stylesheet:function(b){return b instanceof a.Stylesheet},event:function(b){return b instanceof a.Event},emptyString:function(b){if(!b){return true}else{if(a.is.string(b)){if(b===""||b.match(/^\s+$/)){return true}}}return false},nonemptyString:function(b){if(b&&a.is.string(b)&&b!==""&&!b.match(/^\s+$/)){return true}return false},domElement:function(b){if(typeof HTMLElement==="undefined"){return false
}else{return b instanceof HTMLElement}}}})(cytoscape);(function(a){a.util={extend:function(){var l,d,b,c,h,j,g=arguments[0]||{},f=1,e=arguments.length,k=false;if(typeof g==="boolean"){k=g;g=arguments[1]||{};f=2}if(typeof g!=="object"&&!a.is.fn(g)){g={}}if(e===f){g=this;--f}for(;f<e;f++){if((l=arguments[f])!=null){for(d in l){b=g[d];c=l[d];if(g===c){continue}if(k&&c&&(a.is.plainObject(c)||(h=a.is.array(c)))){if(h){h=false;j=b&&a.is.array(b)?b:[]}else{j=b&&a.is.plainObject(b)?b:{}}g[d]=a.util.extend(k,j,c)
}else{if(c!==undefined){g[d]=c}}}}}return g},error:function(b){if(console){if(console.error){console.error(b)}else{if(console.log){console.log(b)}else{throw b}}}else{throw b}},clone:function(d){var c={};for(var b in d){if(d.hasOwnProperty(b)){c[b]=d[b]}}return c},copy:function(b){if(b==null){return b}if(a.is.array(b)){return b.slice()}else{if(a.is.plainObject(b)){return a.util.clone(b)}else{return b}}},mapEmpty:function(d){var c=true;if(d!=null){for(var b in d){c=false;break}}return c},pushMap:function(b){var c=a.util.getMap(b);
if(c==null){a.util.setMap($.extend({},b,{value:[b.value]}))}else{c.push(b.value)}},setMap:function(c){var g=c.map;var e;var f=c.keys;var b=f.length;for(var d=0;d<b;d++){var e=f[d];if(a.is.plainObject(e)){a.util.error("Tried to set map with object key")}if(d<f.length-1){if(g[e]==null){g[e]={}}g=g[e]}else{g[e]=c.value}}},getMap:function(c){var g=c.map;var f=c.keys;var b=f.length;for(var e=0;e<b;e++){var d=f[e];if(a.is.plainObject(d)){a.util.error("Tried to get map with object key")}g=g[d];if(g==null){return g
}}return g},deleteMap:function(k){var e=k.map;var j=k.keys;var d=j.length;var c=k.keepChildren;for(var f=0;f<d;f++){var g=j[f];if(a.is.plainObject(g)){a.util.error("Tried to delete map with object key")}var h=f===k.keys.length-1;if(h){if(c){for(var b in e){if(!c[b]){delete e[b]}}}else{delete e[g]}}else{e=e[g]}}},capitalize:function(b){if(a.is.emptyString(b)){return b}return b.charAt(0).toUpperCase()+b.substring(1)},camel2dash:function(h){var e=[];for(var f=0;f<h.length;f++){var g=h[f];var b=g.toLowerCase();
var d=g!==b;if(d){e.push("-");e.push(b)}else{e.push(g)}}var c=e.length===h.length;if(c){return h}return e.join("")},dash2camel:function(f){var b=[];var e=false;for(var c=0;c<f.length;c++){var d=f[c];var g=d==="-";if(g){e=true}else{if(e){b.push(d.toUpperCase())}else{b.push(d)}e=false}}return b.join("")},trim:function(d){var c,b;for(c=0;c<d.length&&d[c]===" ";c++){}for(b=d.length-1;b>c&&d[b]===" ";b--){}return d.substring(c,b+1)},hex2tuple:function(h){if(!(h.length===4||h.length===7)||h[0]!=="#"){return
}var f=h.length===4;var e,d,c;var i=16;if(f){e=parseInt(h[1]+h[1],i);d=parseInt(h[2]+h[2],i);c=parseInt(h[3]+h[3],i)}else{e=parseInt(h[1]+h[2],i);d=parseInt(h[3]+h[4],i);c=parseInt(h[5]+h[6],i)}return[e,d,c]},hsl2tuple:function(w){var t;var k=a.util.regex.number;var n,x,j,v,c,o,u;var i=new RegExp("^hsl[a]?\\(("+k+")\\s*,\\s*("+k+"[%])\\s*,\\s*("+k+"[%])(?:\\s*,\\s*("+k+"))?\\)$").exec(w);if(i){n=parseInt(i[1]);if(n<0){n=(360-(-1*n%360))%360}else{if(n>360){n=n%360}}n/=360;x=parseFloat(i[2]);if(x<0||x>100){return
}x=x/100;j=parseFloat(i[3]);if(j<0||j>100){return}j=j/100;v=i[4];if(v!==undefined){v=parseFloat(v);if(v<0||v>1){return}}if(x===0){c=o=u=Math.round(j*255)}else{function f(h,g,b){if(b<0){b+=1}if(b>1){b-=1}if(b<1/6){return h+(g-h)*6*b}if(b<1/2){return g}if(b<2/3){return h+(g-h)*(2/3-b)*6}return Math.round(255*h)}var d=j<0.5?j*(1+x):j+x-j*x;var e=2*j-d;c=f(e,d,n+1/3);o=f(e,d,n);u=f(e,d,n-1/3)}t=[c,o,u,v]}return t},rgb2tuple:function(k){var h;var d=a.util.regex.number;var b=new RegExp("^rgb[a]?\\(("+d+"[%]?)\\s*,\\s*("+d+"[%]?)\\s*,\\s*("+d+"[%]?)(?:\\s*,\\s*("+d+"))?\\)$").exec(k);
if(b){h=[];var l=[];for(var e=1;e<=3;e++){var g=b[e];if(g[g.length-1]==="%"){l[e]=true}g=parseFloat(g);if(l[e]){g=g/100*255}if(g<0||g>255){return}h.push(Math.floor(g))}var f=l[1]||l[2]||l[3];var j=l[1]&&l[2]&&l[3];if(f&&!j){return}var c=b[4];if(c!==undefined){c=parseFloat(c);if(c<0||c>1){return}h.push(c)}}return h},colorname2tuple:function(b){return a.util.colors[b.toLowerCase()]},color2tuple:function(b){return a.util.colorname2tuple(b)||a.util.hex2tuple(b)||a.util.rgb2tuple(b)||a.util.hsl2tuple(b)
},tuple2hex:function(d){var f=d[0];var e=d[1];var c=d[2];function h(b){var g=b.toString(16);if(g.length===1){g="0"+g}return g}return"#"+h(f)+h(e)+h(c)},regex:{number:"(?:\\d*\\.\\d+|\\d+|\\d*\\.\\d+[eE]\\d+)"},colors:{transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}}
})(cytoscape);(function(b){b.math={};b.math.boxInBezierVicinity=function(n,j,u,k,p,i,o,h,l,f,m){var v=Math.min(n,u)-m;var s=Math.min(j,k)-m;var t=Math.max(n,u)+m;var r=Math.max(j,k)+m;if(p>=v&&p<=t&&i>=s&&i<=r){return 2}else{if(l>=v&&l<=t&&f>=s&&f<=r){return 2}else{if(o>=v&&o<=t&&h>=s&&h<=r){return 1}}}var g=Math.min(p,o,l);var e=Math.min(i,h,f);var d=Math.max(p,o,l);var c=Math.max(i,h,f);if(g>t||d<v||e>r||c<s){return 0}return 1};b.math.checkStraightEdgeCrossesBox=function(r,k,y,n,t,g,s,d,p){var z=Math.min(r,y)-p;
var w=Math.min(k,n)-p;var x=Math.max(r,y)+p;var v=Math.max(k,n)+p;var h=s-t;var m=t;var u;var e=d-g;var l=g;var o;if(Math.abs(h)<0.0001){return(t>=z&&t<=x&&Math.min(g,d)<=w&&Math.max(g,d)>=v)}var c=(z-m)/h;if(c>0&&c<=1){u=e*c+l;if(u>=w&&u<=v){return true}}var j=(x-m)/h;if(j>0&&j<=1){u=e*j+l;if(u>=w&&u<=v){return true}}var f=(w-l)/e;if(f>0&&f<=1){o=h*f+m;if(o>=z&&o<=x){return true}}var i=(v-l)/e;if(i>0&&i<=1){o=h*i+m;if(o>=z&&o<=x){return true}}return false};b.math.checkBezierCrossesBox=function(w,h,J,y,p,S,l,P,j,M,d){var s=Math.min(w,J)-d;
var o=Math.min(h,y)-d;var R=Math.max(w,J)+d;var O=Math.max(h,y)+d;if(p>=s&&p<=R&&S>=o&&S<=O){return true}else{if(j>=s&&j<=R&&M>=o&&M<=O){return true}}var v=p-2*l+j;var g=-2*p+2*l;var F=p;var z=[];if(Math.abs(v)<0.0001){var K=(s-p)/g;var x=(R-p)/g;z.push(K,x)}else{var C=g*g-4*v*(F-s);var t,r;if(C>0){var D=Math.sqrt(C);t=(-g+D)/(2*v);r=(-g-D)/(2*v);z.push(t,r)}var B=g*g-4*v*(F-R);var n,k;if(B>0){var D=Math.sqrt(B);n=(-g+D)/(2*v);k=(-g-D)/(2*v);z.push(n,k)}}z.sort(function(U,T){return U-T});var u=S-2*P+M;
var e=-2*S+2*P;var E=S;var I=[];if(Math.abs(u)<0.0001){var f=(o-S)/e;var G=(O-S)/e;I.push(f,G)}else{var m=e*e-4*u*(E-o);var c,Q;if(m>0){var D=Math.sqrt(m);c=(-e+D)/(2*u);Q=(-e-D)/(2*u);I.push(c,Q)}var i=e*e-4*u*(E-O);var N,L;if(i>0){var D=Math.sqrt(i);N=(-e+D)/(2*u);L=(-e-D)/(2*u);I.push(N,L)}}I.sort(function(U,T){return U-T});for(var A=0;A<z.length;A+=2){for(var H=1;H<I.length;H+=2){if(z[A]<I[H]&&I[H]>=0&&z[A]<=1&&z[A+1]>I[H-1]&&I[H-1]<=1&&z[A+1]>=0){return true}}}return false};b.math.inBezierVicinity=function(i,h,t,e,s,d,r,c,A){var k=0.25*t+0.5*s+0.25*r;
var j=0.25*e+0.5*d+0.25*c;var n,m,w,u;var g,f,l;var z=function(C,I,D,B,H,G,E,F){g=(G-B)*(C-D)+(D-H)*(I-B);f=g*g;sideSquared=(G-B)*(G-B)+(D-H)*(D-H);if(F){if(g>0){return false}}else{if(g<0){return false}}return(f/sideSquared>E)};var p=(k+s)/2;var o=(j+d)/2;var v=true;if(z(p,o,t,e,s,d,0,v)){v=!v}return(!z(i,h,t,e,s,d,A,v)&&!z(i,h,s,d,r,c,A,v)&&!z(i,h,r,c,t,e,A,v))};b.math.solveCubic=function(n,m,l,k,u){m/=n;l/=n;k/=n;var f,g,e,i,p,o,h,j;g=(3*l-(m*m))/9;e=-(27*k)+m*(9*l-2*(m*m));e/=54;f=g*g*g+e*e;u[1]=0;
h=(m/3);if(f>0){p=e+Math.sqrt(f);p=((p<0)?-Math.pow(-p,(1/3)):Math.pow(p,(1/3)));o=e-Math.sqrt(f);o=((o<0)?-Math.pow(-o,(1/3)):Math.pow(o,(1/3)));u[0]=-h+p+o;h+=(p+o)/2;u[4]=u[2]=-h;h=Math.sqrt(3)*(-o+p)/2;u[3]=h;u[5]=-h;return}u[5]=u[3]=0;if(f==0){j=((e<0)?-Math.pow(-e,(1/3)):Math.pow(e,(1/3)));u[0]=-h+2*j;u[4]=u[2]=-(j+h);return}g=-g;i=g*g*g;i=Math.acos(e/Math.sqrt(i));j=2*Math.sqrt(g);u[0]=-h+j*Math.cos(i/3);u[2]=-h+j*Math.cos((i+2*Math.PI)/3);u[4]=-h+j*Math.cos((i+4*Math.PI)/3);return};b.math.sqDistanceToQuadraticBezier=function(p,o,v,j,u,h,t,g){var D=1*v*v-4*v*u+2*v*t+4*u*u-4*u*t+t*t+j*j-4*j*h+2*j*g+4*h*h-4*h*g+g*g;
var C=1*9*v*u-3*v*v-3*v*t-6*u*u+3*u*t+9*j*h-3*j*j-3*j*g-6*h*h+3*h*g;var A=1*3*v*v-6*v*u+v*t-v*p+2*u*u+2*u*p-t*p+3*j*j-6*j*h+j*g-j*o+2*h*h+2*h*o-g*o;var z=1*v*u-v*v+v*p-u*p+j*h-j*j+j*o-h*o;a("coefficients: "+D/D+", "+C/D+", "+A/D+", "+z/D);var k=[];this.solveCubic(D,C,A,z,k);var e=1e-7;var B=[];for(var l=0;l<6;l+=2){if(Math.abs(k[l+1])<e&&k[l]>=0&&k[l]<=1){B.push(k[l])}}B.push(1);B.push(0);var f=-1;var w;var n,m,r;for(var s=0;s<B.length;s++){n=Math.pow(1-B[s],2)*v+2*(1-B[s])*B[s]*u+B[s]*B[s]*t;m=Math.pow(1-B[s],2)*j+2*(1-B[s])*B[s]*h+B[s]*B[s]*g;
r=Math.pow(n-p,2)+Math.pow(m-o,2);a("distance for param "+B[s]+": "+Math.sqrt(r));if(f>=0){if(r<f){f=r;w=B[s]}}else{f=r;w=B[s]}}a("given: ( "+p+", "+o+"), ( "+v+", "+j+"), ( "+u+", "+h+"), ( "+t+", "+g+")");a("roots: "+k);a("params: "+B);a("closest param: "+w);return f};var a=function(c){if(false){console.log(c)}}})(cytoscape);(function(a){a.instances=[];a.instanceCounter=0;a.lastInstanceTime;a.registerInstance=function(b,f){var h;if(a.is.core(b)){h=b}else{if(a.is.domElement(b)){f=b}}var e=+new Date;
var d;if(!a.lastInstanceTime||a.lastInstanceTime===e){a.instanceCounter=0}else{++a.instanceCounter}a.lastInstanceTime=e;d=a.instanceCounter;var g="cy-"+e+"-"+d;var c={id:g,cy:h,domElement:f,readies:[]};a.instances.push(c);a.instances[g]=c;return c};a.getRegistrationForInstance=function(b,e){var g;if(a.is.core(b)){if(b.registered()){g=b}}else{if(a.is.domElement(b)){e=b}}if(a.is.core(g)){var f=g.instanceId();return a.instances[f]}else{if(a.is.domElement(e)){for(var c=a.instances.length-1;c>=0;c--){var d=a.instances[c];
if(d.domElement===e){return d}}}}}})(cytoscape);(function(c){var f={};c.extensions=f;var d={};c.modules=d;function b(j,i,k){var h={};h[i]=k;switch(j){case"core":case"collection":c.fn[j](h)}return c.util.setMap({map:f,keys:[j,i],value:k})}function g(i,h){return c.util.getMap({map:f,keys:[i,h]})}function e(k,i,j,h,l){return c.util.setMap({map:d,keys:[k,i,j,h],value:l})}function a(k,i,j,h){return c.util.getMap({map:d,keys:[k,i,j,h]})}c.extension=function(){if(arguments.length==2){return g.apply(this,arguments)
}else{if(arguments.length==3){return b.apply(this,arguments)}else{if(arguments.length==4){return a.apply(this,arguments)}else{if(arguments.length==5){return e.apply(this,arguments)}else{$.error("Invalid extension access syntax")}}}}}})(cytoscape);(function(b,a){if(!b){return}b.fn.cytoscape=function(h){var k=b(this);if(h==="get"){var g=a.getRegistrationForInstance(k[0]);return g.cy}else{if(a.is.fn(h)){var f=h;var c=k[0];var g=a.getRegistrationForInstance(c);if(!g){g=a.registerInstance(c)}if(g&&g.cy&&g.cy.ready()){g.cy.trigger("ready",[],f)
}else{g.readies.push(f)}}else{if(a.is.plainObject(h)){return k.each(function(){var i=b.extend({},h,{container:b(this)[0]});cytoscape(i)})}else{var c=k[0];var j=[];var d=[];for(var e=1;e<arguments.length;e++){d[e-1]=arguments[e]}k.each(function(){var l=a.getRegistrationForInstance(c);var n=l.cy;var m=h;if(n&&a.is.fn(n[m])){var i=n[m].apply(n,d);j.push(i)}});if(j.length===1){j=j[0]}else{if(j.length==0){j=b(this)}}return j}}}};b.cytoscape=cytoscape;if(b.fn.cy==null&&b.cy==null){b.fn.cy=b.fn.cytoscape;
b.cy=b.cytoscape}})(typeof jQuery!=="undefined"?jQuery:null,cytoscape);(function(a){a.Event=function(e,d){if(!(this instanceof a.Event)){return new a.Event(e,d)}if(e&&e.type){this.originalEvent=e;this.type=e.type;this.isDefaultPrevented=(e.defaultPrevented||e.returnValue===false||e.getPreventDefault&&e.getPreventDefault())?c:b}else{this.type=e}if(d){a.util.extend(this,d)}this.timeStamp=e&&e.timeStamp||+new Date};function b(){return false}function c(){return true}a.Event.prototype={preventDefault:function(){this.isDefaultPrevented=c;
var d=this.originalEvent;if(!d){return}if(d.preventDefault){d.preventDefault()}else{d.returnValue=false}},stopPropagation:function(){this.isPropagationStopped=c;var d=this.originalEvent;if(!d){return}if(d.stopPropagation){d.stopPropagation()}d.cancelBubble=true},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=c;this.stopPropagation()},isDefaultPrevented:b,isPropagationStopped:b,isImmediatePropagationStopped:b}})(cytoscape);(function(a){a.define={data:function(c){var b={field:"data",bindingEvent:"data",allowBinding:false,allowSetting:false,allowGetting:false,settingEvent:"data",settingTriggersEvent:false,triggerFnName:"trigger",immutableKeys:{},updateMappers:false};
c=a.util.extend({},b,c);return function(e,s){var g=c;var x=this;var f=x.length!==undefined;var t=f?x:[x];var w=f?x[0]:x;if(a.is.string(e)){if(g.allowGetting&&s===undefined){var o;if(w){o=w._private[g.field][e]}return o}else{if(g.allowSetting&&s!==undefined){var d=!g.immutableKeys[e];if(d){for(var n=0,h=t.length;n<h;n++){t[n]._private[g.field][e]=s}if(g.updateMappers){x.updateMappers()}if(g.settingTriggersEvent){x[g.triggerFnName](g.settingEvent)}}}}}else{if(g.allowSetting&&a.is.plainObject(e)){var m=e;
var j,u;for(j in m){u=m[j];var d=!g.immutableKeys[j];if(d){for(var n=0,h=t.length;n<h;n++){t[n]._private[g.field][j]=u}}}if(g.updateMappers){x.updateMappers()}if(g.settingTriggersEvent){x[g.triggerFnName](g.settingEvent)}}else{if(g.allowBinding&&a.is.fn(e)){var r=e;x.bind(g.bindingEvent,r)}else{if(g.allowGetting&&e===undefined){var o;if(w){o=w._private[g.field]}return o}}}}return x}},batchData:function(d){var c={field:"data",event:"data",triggerFnName:"trigger",immutableKeys:{},updateMappers:false};
var b=d=a.util.extend({},c,d);return function(f){var s=this;var h=s.length!==undefined;var u=h?s:s._private.elements;if(u.length===0){return s}var j=h?u[0]._private.cy:s;for(var n=0;n<u.length;n++){var t=u[n];var g=t._private.data.id;var r=f[g];if(r!==undefined&&r!==null){var m=r;var l,o;for(l in m){o=m[l];var e=!b.immutableKeys[l];if(e){t._private[b.field][l]=o}}}}var p=new a.Collection(j,u);if(b.updateMappers){p.updateMappers()}p[b.triggerFnName](b.event);return s}},removeData:function(c){var b={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:false,immutableKeys:{}};
c=a.util.extend({},b,c);return function(o){var g=c;var v=this;var f=v.length!==undefined;var r=f?v:[v];var t=f?v[0]:v;if(a.is.string(o)){var u=o.split(/\s+/);var j=u.length;for(var k=0;k<j;k++){var s=u[k];if(a.is.emptyString(s)){continue}var e=!g.immutableKeys[s];if(e){for(var n=0,h=r.length;n<h;n++){delete r[n]._private[g.field][s]}}}if(g.triggerEvent){v[g.triggerFnName](g.event)}}else{if(o===undefined){for(var n=0,h=r.length;n<h;n++){var m=r[n]._private[g.field];for(var s in m){var d=!g.immutableKeys[s];
if(d){delete m[s]}}}if(g.triggerEvent){v[g.triggerFnName](g.event)}}}return v}},event:{regex:/(\w+)(\.\w+)?/,optionalTypeRegex:/(\w+)?(\.\w+)?/,props:"altKey bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase metaKey offsetX offsetY originalTarget pageX pageY prevValue relatedTarget screenX screenY shiftKey target view which".split(/\s+/),aliases:"mousedown mouseup click mouseover mouseout mousemove touchstart touchmove touchend grab drag free".split(/\s+/),aliasesOn:function(e){var b=a.define.event.aliases;
for(var d=0;d<b.length;d++){var c=b[d];e[c]=function(f,g){if(a.is.fn(g)){this.on(c,f,g)}else{if(a.is.fn(f)){g=f;this.on(c,g)}else{this.trigger(c)}}return this}}},falseCallback:function(){return false}},on:function(c){var b={unbindSelfOnTrigger:false,unbindAllBindersOnTrigger:false};c=a.util.extend({},b,c);return function(e,u,z,k){var r=this;var d=r.length!==undefined;var f=d?r:[r];var x=d?r[0]:r;var w=a.is.string(e);var s=c;if(a.is.plainObject(u)){k=z;z=u;u=undefined}else{if(a.is.fn(u)||u===false){k=u;
z=undefined;u=undefined}}if(a.is.fn(z)||z===false){k=z;z=undefined}if(!(a.is.fn(k)||k===false)&&w){return r}if(w){var y={};y[e]=k;e=y}for(var l in e){k=e[l];if(k===false){k=a.define.event.falseCallback}if(!a.is.fn(k)){continue}l=l.split(/\s+/);for(var v=0;v<l.length;v++){var o=l[v];if(a.is.emptyString(o)){continue}var m=o.match(a.define.event.regex);if(m){var g=m[1];var n=m[2]?m[2]:undefined;var h={callback:k,data:z,delegated:u?true:false,selector:u,type:g,namespace:n,unbindSelfOnTrigger:s.unbindSelfOnTrigger,unbindAllBindersOnTrigger:s.unbindAllBindersOnTrigger,binders:f};
for(var t=0;t<f.length;t++){f[t]._private.listeners.push(h)}}}}return r}},off:function(c){var b={};c=a.util.extend({},b,c);return function(e,z,l){var t=this;var d=t.length!==undefined;var f=d?t:[t];var D=d?t[0]:t;var C=a.is.string(e);var u=c;if(arguments.length===0){for(var A=0;A<f.length;A++){f[A]._private.listeners=[]}return t}if(a.is.fn(z)||z===false){l=z;z=undefined}if(C){var F={};F[e]=l;e=F}for(var m in e){l=e[m];if(l===false){l=a.define.event.falseCallback}m=m.split(/\s+/);for(var B=0;B<m.length;
B++){var s=m[B];if(a.is.emptyString(s)){continue}var n=s.match(a.define.event.optionalTypeRegex);if(n){var g=n[1]?n[1]:undefined;var r=n[2]?n[2]:undefined;for(var A=0;A<f.length;A++){var v=f[A]._private.listeners;for(var y=0;y<v.length;y++){var k=v[y];var o=!r||r===k.namespace;var w=!g||k.type===g;var x=!l||l===k.callback;var E=o&&w&&x;if(E){v.splice(y,1);y--}}}}}}return t}},trigger:function(c){var b={};c=a.util.extend({},b,c);return function(D,g,y){var o=this;var v=o.length!==undefined;var z=v?o:[o];
var E=v?o[0]:o;var J=a.is.string(D);var h=a.is.plainObject(D);var f=a.is.event(D);var R=c;var A=this._private.cy||this;if(J){var L=D.split(/\s+/);D=[];for(var W=0;W<L.length;W++){var G=L[W];if(a.is.emptyString(G)){continue}var n=G.match(a.define.event.regex);var ab=n[1];var M=n[2]?n[2]:undefined;D.push({type:ab,namespace:M})}}else{if(h){var Y=D;D=[Y]}}if(g){if(!a.is.array(g)){g=[g]}}else{g=[]}for(var W=0;W<D.length;W++){var r=D[W];for(var V=0;V<z.length;V++){var K=z[V];var P=K._private.listeners;
var d=a.is.element(K);var C=d;var G;if(f){G=r;G.cyTarget=G.cyTarget||K;G.cy=G.cy||A;G.namespace=G.namespace||r.namespace}else{G=new a.Event(r,{cyTarget:K,cy:A,namespace:r.namespace});var F=a.define.event.props;for(var U=0;U<F.length;U++){var x=F[U];G[x]=r[x]}}if(y){P=[{namespace:G.namespace,type:G.type,callback:y}]}for(var U=0;U<P.length;U++){var e=P[U];var N=!e.namespace||e.namespace===G.namespace;var w=e.type===G.type;var O=e.delegated?(K!==G.cyTarget&&a.is.element(G.cyTarget)&&G.cyTarget.is(e.selector)):(true);
var H=N&&w&&O;if(H){var Q=[G];Q=Q.concat(g);if(e.data){G.data=e.data}else{G.data=undefined}if(e.unbindSelfOnTrigger||e.unbindAllBindersOnTrigger){P.splice(U,1);U--}if(e.unbindAllBindersOnTrigger){var u=e.binders;for(var T=0;T<u.length;T++){var t=u[T];if(!t||t===K){continue}var B=t._private.listeners;for(var S=0;S<B.length;S++){var Z=B[S];if(Z===e){B.splice(S,1);S--}}}}var aa=e.delegated?G.cyTarget:K;var I=e.callback.apply(aa,Q);if(I===false||G.isPropagationStopped()){C=false;if(I===false){G.stopPropagation();
G.preventDefault()}}}}if(C){var s=K.parent();var X=s.length!==0;if(X){s=s[0];s.trigger(G)}else{A.trigger(G)}}}}return o}}}})(cytoscape);(function(a,b){a.Style=function(c){if(!(this instanceof a.Style)){return new a.Style(c)}if(!a.is.core(c)){a.util.error("A style must have a core reference");return}this._private={cy:c,coreStyle:{}};this.length=0;this.addDefaultStylesheet()};a.style=a.Style;a.styfn=a.Style.prototype;a.fn.style=function(c,d){for(var f in c){var e=c[f];a.Style.prototype=e}};a.stylesheet=a.Stylesheet=function(){if(!(this instanceof a.Stylesheet)){return new a.Stylesheet()
}this.length=0};a.Stylesheet.prototype.selector=function(c){var d=this.length++;this[d]={selector:c,properties:[]};return this};a.Stylesheet.prototype.css=function(e,g){var f=this.length-1;if(a.is.string(e)){this[f].properties.push({name:e,value:g})}else{if(a.is.plainObject(e)){map=e;for(var d=0;d<a.style.properties.length;d++){var h=a.style.properties[d];var c=map[h.name];if(c===undefined){c=map[a.util.dash2camel(h.name)]}if(c!==undefined){var e=h.name;var g=c;this[f].properties.push({name:e,value:g})
}}}}return this};a.Stylesheet.prototype.generateStyle=function(l){var h=new a.Style(l);for(var f=0;f<this.length;f++){var e=this[f];var c=e.selector;var g=e.properties;h.selector(c);for(var d=0;d<g.length;d++){var k=g[d];h.css(k.name,k.value)}}return h};a.Stylesheet.prototype.assignToStyle=function(h){h.clear();for(var f=0;f<this.length;f++){var e=this[f];var c=e.selector;var g=e.properties;h.selector(c);for(var d=0;d<g.length;d++){var k=g[d];h.css(k.name,k.value)}}};(function(){var f=a.util.regex.number;
a.style.types={zeroOneNumber:{number:true,min:0,max:1,unitless:true},nonNegativeInt:{number:true,min:0,integer:true,unitless:true},size:{number:true,min:0,enums:["auto"]},bgSize:{number:true,min:0,allowPercent:true},color:{color:true},lineStyle:{enums:["solid","dotted","dashed"]},curveStyle:{enums:["bundled","bezier"]},fontFamily:{regex:"^([\\w- ]+(?:\\s*,\\s*[\\w- ]+)*)$"},fontVariant:{enums:["small-caps","normal"]},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","capitalize","uppercase","lowercase"]},nodeShape:{enums:["rectangle","roundrectangle","ellipse","triangle","square","pentagon","hexagon","heptagon","octagon"]},arrowShape:{enums:["tee","triangle","square","circle","diamond","none"]},visibility:{enums:["hidden","visible"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},positionx:{enums:["left","center","right"],number:true,allowPercent:true},positiony:{enums:["top","center","bottom"],number:true,allowPercent:true},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"]},cursor:{enums:["auto","crosshair","default","e-resize","n-resize","ne-resize","nw-resize","pointer","progress","s-resize","sw-resize","text","w-resize","wait","grab","grabbing"]},text:{string:true},data:{mapping:true,regex:"^data\\s*\\(\\s*(\\w+)\\s*\\)$"},mapData:{mapping:true,regex:"^mapData\\((\\w+)\\s*\\,\\s*("+f+")\\s*\\,\\s*("+f+")\\s*,\\s*(\\w+)\\s*\\,\\s*(\\w+)\\)$"},url:{regex:"^url\\s*\\(\\s*([^\\s]+)\\s*\\s*\\)|none|(.+)$"}};
var d=a.style.types;a.style.properties=[{name:"cursor",type:d.cursor},{name:"text-valign",type:d.valign},{name:"text-halign",type:d.halign},{name:"color",type:d.color},{name:"content",type:d.text},{name:"text-outline-color",type:d.color},{name:"text-outline-width",type:d.size},{name:"text-outline-opacity",type:d.zeroOneNumber},{name:"text-opacity",type:d.zeroOneNumber},{name:"text-decoration",type:d.textDecoration},{name:"text-transform",type:d.textTransform},{name:"font-family",type:d.fontFamily},{name:"font-style",type:d.fontStyle},{name:"font-variant",type:d.fontVariant},{name:"font-weight",type:d.fontWeight},{name:"font-size",type:d.size},{name:"visibility",type:d.visibility},{name:"opacity",type:d.zeroOneNumber},{name:"z-index",type:d.nonNegativeInt},{name:"background-color",type:d.color},{name:"background-opacity",type:d.zeroOneNumber},{name:"background-image",type:d.url},{name:"background-position-x",type:d.positionx},{name:"background-position-y",type:d.positiony},{name:"background-repeat",type:d.bgRepeat},{name:"background-size-x",type:d.bgSize},{name:"background-size-y",type:d.bgSize},{name:"border-color",type:d.color},{name:"border-opacity",type:d.zeroOneNumber},{name:"border-width",type:d.size},{name:"border-style",type:d.lineStyle},{name:"height",type:d.size},{name:"width",type:d.size},{name:"shape",type:d.nodeShape},{name:"source-arrow-shape",type:d.arrowShape},{name:"target-arrow-shape",type:d.arrowShape},{name:"source-arrow-color",type:d.color},{name:"target-arrow-color",type:d.color},{name:"line-style",type:d.lineStyle},{name:"line-color",type:d.color},{name:"control-point-step-size",type:d.size},{name:"curve-style",type:d.curveStyle},{name:"selection-box-color",type:d.color},{name:"selection-box-opacity",type:d.zeroOneNumber},{name:"selection-box-border-color",type:d.color},{name:"selection-box-border-width",type:d.size},{name:"panning-cursor",type:d.cursor}];
var e=a.style.properties;for(var c=0;c<e.length;c++){var g=e[c];e[g.name]=g}})();a.styfn.addDefaultStylesheet=function(){var c=this.containerPropertyAsString("font-family")||"sans-serif";var i=this.containerPropertyAsString("font-style")||"normal";var f=this.containerPropertyAsString("font-variant")||"normal";var e=this.containerPropertyAsString("font-weight")||"normal";var d=this.containerPropertyAsString("color")||"#000";var j=this.containerPropertyAsString("text-transform")||"none";var h=this.containerPropertyAsString("text-decoration")||"none";
var g=this.containerPropertyAsString("font-size")||12;this.selector("node, edge").css({cursor:"default","text-valign":"top","text-halign":"center",color:d,content:undefined,"text-outline-color":"transparent","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":j,"font-family":c,"font-style":i,"font-variant":f,"font-weight":e,"font-size":g,visibility:"visible",opacity:1,"z-index":0,content:""}).selector("node").css({"background-color":"#888","background-opacity":1,"background-image":"none","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid",height:30,width:30,shape:"ellipse"}).selector("edge").css({"source-arrow-shape":"none","target-arrow-shape":"none","source-arrow-color":"#bbb","target-arrow-color":"#bbb","line-style":"solid","line-color":"#bbb",width:1,"control-point-step-size":40,"curve-style":"bezier"}).selector("core").css({"selection-box-color":"#ddd","selection-box-opacity":0.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"panning-cursor":"grabbing"})
};a.styfn.clear=function(){for(var c=0;c<this.length;c++){delete this[c]}this.length=0;return this};a.styfn.resetToDefault=function(){this.clear();this.addDefaultStylesheet();return this};a.styfn.core=function(){return this._private.coreStyle};a.styfn.parse=function(A,u,l){A=a.util.camel2dash(A);var h=a.style.properties[A];var n=u;if(!h){return null}if(u===undefined||u===null){return null}var j=a.is.string(u);if(j){u=a.util.trim(u)}var g=h.type;if(!g){return null}if(l&&(u===""||u===null)){return{name:A,value:u,bypass:true,deleteBypass:true}
}var z,p;if(!j){}else{if(z=new RegExp(a.style.types.data.regex).exec(u)){return{name:A,value:z,strValue:u,mapped:a.style.types.data,field:z[1],bypass:l}}else{if(p=new RegExp(a.style.types.mapData.regex).exec(u)){if(!(g.color||g.number)){return false}var d=this.parse(A,p[4]);if(!d||d.mapped){return false}var f=this.parse(A,p[5]);if(!f||f.mapped){return false}if(d.value===f.value){return false}else{if(g.color){var s=d.value;var r=f.value;var w=s[0]===r[0]&&s[1]===r[1]&&s[2]===r[2]&&(s[3]===r[3]||((s[3]==null||s[3]===1)&&(r[3]==null||r[3]===1)));
if(w){return false}}}return{name:A,value:p,strValue:u,mapped:a.style.types.mapData,field:p[1],fieldMin:parseFloat(p[2]),fieldMax:parseFloat(p[3]),valueMin:d.value,valueMax:f.value,bypass:l}}}}if(g.number){var v;if(!g.unitless){if(j){var k=u.match("^("+a.util.regex.number+")(px|em"+(g.allowPercent?"|\\%":"")+")?$");if(!g.enums){if(!k){return null}u=k[1];v=k[2]||"px"}}else{v="px"}}u=parseFloat(u);if(isNaN(u)&&g.enums!==undefined){u=n;for(var x=0;x<g.enums.length;x++){var c=g.enums[x];if(c===u){return{name:A,value:u,strValue:u,bypass:l}
}}return null}if(g.integer&&!a.is.integer(u)){return null}if((g.min!==undefined&&u<g.min)||(g.max!==undefined&&u>g.max)){return null}var y={name:A,value:u,strValue:""+u+(v?v:""),units:v,bypass:l,pxValue:g.unitless||v==="%"?undefined:(v==="px"||!v?(u):(this.getEmSizeInPixels()*u))};return y}else{if(g.color){var o=a.util.color2tuple(u);return{name:A,value:o,strValue:u,bypass:l}}else{if(g.enums){for(var x=0;x<g.enums.length;x++){var c=g.enums[x];if(c===u){return{name:A,value:u,strValue:u,bypass:l}}}}else{if(g.regex){var e=new RegExp(g.regex);
var t=e.exec(u);if(t){return{name:A,value:t,strValue:u,bypass:l}}else{return null}}else{if(g.string){return{name:A,value:u,strValue:u,bypass:l}}else{return null}}}}}};a.styfn.getEmSizeInPixels=function(){var f=this._private.cy;var e=f.container();if(b&&e){var d=b.getComputedStyle(e).getPropertyValue("font-size");var c=parseFloat(d);return c}else{return 1}};a.styfn.containerCss=function(c){var e=this._private.cy;var d=e.container();if(b&&d){return b.getComputedStyle(d).getPropertyValue(c)}};a.styfn.containerProperty=function(d){var c=this.containerCss(d);
var e=this.parse(d,c);return e};a.styfn.containerPropertyAsString=function(c){var d=this.containerProperty(c);if(d){return d.strValue}};a.styfn.selector=function(d){var c=d==="core"?null:new a.Selector(d);var e=this.length++;this[e]={selector:c,properties:[]};return this};a.styfn.css=function(){var d=arguments;switch(d.length){case 1:var f=d[0];for(var e=0;e<a.style.properties.length;e++){var g=a.style.properties[e];var c=f[g.name];if(c===undefined){c=f[a.util.dash2camel(g.name)]}if(c!==undefined){this.cssRule(g.name,c)
}}break;case 2:this.cssRule(d[0],d[1]);break;default:break}return this};a.styfn.cssRule=function(c,g){var f=this.parse(c,g);if(f){var d=this.length-1;this[d].properties.push(f);var e=!this[d].selector;if(e){this._private.coreStyle[f.name]=f}}return this};a.styfn.applyParsedProperty=function(n,v){var g=v;var t=n._private.style;var l,i;var h=a.style.properties[g.name].type;var m=g.bypass;var u=t[g.name];var p=u&&u.bypass;if(m&&g.deleteBypass){var o=t[g.name];if(!o){return true}else{if(o.bypass&&o.bypassed){t[g.name]=o.bypassed;
return true}else{return false}}}switch(g.mapped){case a.style.types.mapData:l=n._private.data[g.field];if(!a.is.number(l)){return false}var d=(l-g.fieldMin)/(g.fieldMax-g.fieldMin);if(h.color){var s=g.valueMin[0];var r=g.valueMax[0];var c=g.valueMin[1];var y=g.valueMax[1];var k=g.valueMin[2];var j=g.valueMax[2];var x=g.valueMin[3]==null?1:g.valueMin[3];var w=g.valueMax[3]==null?1:g.valueMax[3];var f=[Math.round(s+(r-s)*d),Math.round(c+(y-c)*d),Math.round(k+(j-k)*d),Math.round(x+(w-x)*d)];i={bypass:g.bypass,name:g.name,value:f,strValue:["rgba(",f[0],", ",f[1],", ",f[2],", ",f[3],")"].join("")}
}else{if(h.number){var e=g.valueMin+(g.valueMax-g.valueMin)*d;i=this.parse(g.name,e,g.bypass)}else{return false}}if(!i){i=this.parse(g.name,u.strValue,g.bypass)}i.mapping=g;g=i;break;case a.style.types.data:l=n._private.data[g.field];i=this.parse(g.name,l,g.bypass);if(!i){i=this.parse(g.name,u.strValue,g.bypass)}i.mapping=g;g=i;break;case undefined:break;default:return false}if(m){if(p){g.bypassed=u.bypassed}else{g.bypassed=u}t[g.name]=g}else{if(p){u.bypassed=g}else{t[g.name]=g}}return true};a.styfn.applyProperty=function(f,d,e){var c=this.parse(d,e);
if(!c){return false}return this.applyParsedProperty(f,c)};a.styfn.apply=function(m){for(var d=0;d<m.length;d++){var l=m[d];for(var g=0;g<this.length;g++){var e=this[g];var h=e.selector&&e.selector.filter(l).length>0;var k=e.properties;if(h){for(var f=0;f<k.length;f++){var c=k[f];this.applyParsedProperty(l,c)}}}}};a.styfn.update=function(){var d=this._private.cy;var c=d.elements();c.updateStyle()};a.styfn.getRenderedStyle=function(l){var l=l[0];if(l){var c={};var e=l._private.style;var h=this._private.cy;
var k=h.zoom();for(var j=0;j<a.style.properties.length;j++){var d=a.style.properties[j];var g=e[d.name];if(g){var f=g.unitless?g.strValue:(g.pxValue*k)+"px";c[d.name]=f;c[a.util.dash2camel(d.name)]=f}}return c}};a.styfn.getRawStyle=function(g){var g=g[0];if(g){var d={};var f=g._private.style;for(var e=0;e<a.style.properties.length;e++){var h=a.style.properties[e];var c=f[h.name];if(c){d[h.name]=c.strValue;d[a.util.dash2camel(h.name)]=c.strValue}}return d}};a.styfn.getValueStyle=function(g){var d,f;
if(a.is.element(g)){d={};f=g._private.style}else{d={};f=g}if(f){for(var e=0;e<a.style.properties.length;e++){var j=a.style.properties[e];var c=f[j.name]||f[a.util.dash2camel(j.name)];if(c!==undefined&&!a.is.plainObject(c)){c=this.parse(j.name,c)}if(c){var h=c.value===undefined?c:c.value;d[j.name]=h;d[a.util.dash2camel(j.name)]=h}}}return d};a.styfn.updateFunctionalProperties=function(c){for(var f=0;f<c.length;f++){var k=c[f];var h=k._private.style;for(var e=0;e<a.style.properties.length;e++){var l=a.style.properties[e];
var g=h[l.name];if(g&&g.mapping){var d=g.mapping;this.applyParsedProperty(k,d)}}}};a.styfn.applyBypass=function(o,d,m){var l=[];if(d==="*"||d==="**"){if(m!==undefined){for(var g=0;g<a.style.properties.length;g++){var c=a.style.properties[g];var d=c.name;var k=this.parse(d,m,true);if(k){l.push(k)}}}}else{if(a.is.string(d)){var k=this.parse(d,m,true);if(k){l.push(k)}}else{if(a.is.plainObject(d)){var e=d;for(var g=0;g<a.style.properties.length;g++){var c=a.style.properties[g];var d=c.name;var m=e[d];
if(m===undefined){m=e[a.util.dash2camel(d)]}if(m!==undefined){var k=this.parse(d,m,true);if(k){l.push(k)}}}}else{return false}}}if(l.length===0){return false}var h=false;for(var g=0;g<o.length;g++){var n=o[g];for(var f=0;f<l.length;f++){var c=l[f];h=this.applyParsedProperty(n,c)||h}}return h};a.styfn.removeAllBypasses=function(c){for(var g=0;g<a.style.properties.length;g++){var l=a.style.properties[g];var f=l.name;var k="";var d=this.parse(f,k,true);for(var e=0;e<c.length;e++){var h=c[e];this.applyParsedProperty(h,d)
}}};a.styfn.calculateControlPoints=function(c){var p={};var u=false;var j=c.length;for(var n=0;n<c.length;n++){var v=c[n];var t=v._private.style["curve-style"].strValue==="bundled";if(t){u=true;break}}var s=j%2!==0&&!u;for(var n=0;n<c.length;n++){var g=c[n];var k=g._private.data.id;var h=g.source();var o=g.target();var r=h.position();var l=o.position();var w={x:(r.x+l.x)/2,y:(r.y+l.y)/2};var d=g._private.style["control-point-step-size"].pxValue;var f=(j-1)*-d/2;if(h.id()==o.id()){c[n]._private.rscratch.isSelfEdge=true;
g._private.rscratch.cp2ax=r.x;g._private.rscratch.cp2ay=r.y-1.3*d*(n/3+1);g._private.rscratch.cp2cx=r.x-1.3*d*(n/3+1);g._private.rscratch.cp2cy=r.y;g._private.rscratch.selfEdgeMidX=(g._private.rscratch.cp2ax+g._private.rscratch.cp2cx)/2;g._private.rscratch.selfEdgeMidY=(g._private.rscratch.cp2ay+g._private.rscratch.cp2cy)/2;continue}var m=f+d*n;if(j%2==1&&n==Math.floor(j/2)){c[n]._private.rscratch.isStraightEdge=true;continue}c[n]._private.rscratch.isBezierEdge=true;var y={x:l.y-r.y,y:r.x-l.x};var x=Math.sqrt(y.x*y.x+y.y*y.y);
if(h.id()>o.id()){x*=-1}y.x/=x;y.y/=x;c[n]._private.rscratch.cp2x=w.x+y.x*m;c[n]._private.rscratch.cp2y=w.y+y.y*m}}})(cytoscape,typeof window==="undefined"?null:window);(function(a){a.fn.core=function(b,d){for(var c in b){var e=b[c];a.Core.prototype[c]=e}};a.Core=function(f){if(!(this instanceof a.Core)){return new a.Core(f)}var g=this;var b=f.container;var d=a.getRegistrationForInstance(g,b);if(d){d.cy=this;d.domElement=b}else{d=a.registerInstance(g,b)}var e=d.readies;var c=f;c.layout=a.util.extend({name:typeof module==="undefined"?"grid":"null"},c.layout);
c.renderer=a.util.extend({name:typeof module==="undefined"?"canvas":"null"},c.renderer);this._private={ready:false,instanceId:null,options:c,elements:[],id2index:{},listeners:[],aniEles:[],scratch:{},layout:null,renderer:null,notificationsEnabled:true,minZoom:1e-50,maxZoom:1e+50,zoomEnabled:true,panEnabled:true,zoom:a.is.number(c.zoom)?c.zoom:1,pan:{x:a.is.plainObject(c.pan)&&a.is.number(c.pan.x)?c.pan.x:0,y:a.is.plainObject(c.pan)&&a.is.number(c.pan.y)?c.pan.y:0,}};if(a.is.number(c.minZoom)&&a.is.number(c.maxZoom)&&c.minZoom<c.maxZoom){this._private.minZoom=c.minZoom;
this._private.maxZoom=c.maxZoom}else{if(a.is.number(c.minZoom)&&c.maxZoom===undefined){this._private.minZoom=c.minZoom}else{if(a.is.number(c.maxZoom)&&c.minZoom===undefined){this._private.maxZoom=c.maxZoom}}}this._private.style=a.is.stylesheet(c.style)?c.style.generateStyle(this):new a.Style(g);g.initRenderer(c.renderer);g.load(c.elements,function(){g.startAnimationLoop();g._private.ready=true;for(var h=0;h<e.length;h++){var j=e[h];g.bind("ready",j)}d.readies=[];if(a.is.fn(c.ready)){g.bind("ready",c.ready)
}g.trigger("ready")},c.done)};a.corefn=a.Core.prototype;a.fn.core({ready:function(){return this._private.ready},registered:function(){if(this._private&&this._private.instanceId!=null){return true}else{return false}},registeredId:function(){return this._private.instanceId},getElementById:function(c){var b=this._private.id2index[c];if(b!==undefined){return this._private.elements[b]}return new a.Collection(this)},addToPool:function(c){var g=this._private.elements;var j=this._private.id2index;for(var e=0;
e<c.length;e++){var f=c[e];var h=f._private.data.id;var d=j[h];var b=d!==undefined;if(!b){d=g.length;g.push(f);j[h]=d}}return this},removeFromPool:function(m){var b=this._private.elements;var e=this._private.id2index;for(var g=0;g<m.length;g++){var l=m[g];var c=l._private.data.id;var h=e[c];var k=h!==undefined;if(k){delete this._private.id2index[c];b.splice(h,1);for(var f=h;f<b.length;f++){var d=b[f]._private.data.id;e[d]--}}}},container:function(){return this._private.options.container},options:function(){return a.util.copy(this._private.options)
},json:function(c){var b={};var d=this;b.elements={};d.elements().each(function(e,f){var g=f.group();if(!b.elements[g]){b.elements[g]=[]}b.elements[g].push(f.json())});b.style=d.style();b.scratch=d.scratch();b.zoomEnabled=d._private.zoomEnabled;b.panEnabled=d._private.panEnabled;b.layout=d._private.options.layout;b.renderer=d._private.options.renderer;return b}})})(cytoscape);(function(a,b){a.fn.core({add:function(d){var c;var e=this;if(a.is.elementOrCollection(d)){var u=d;var n=[];for(var h=0;h<u.length;
h++){var t=u[h];n.push(t.json())}c=new a.Collection(e,n)}else{if(a.is.array(d)){var n=d;c=new a.Collection(e,n)}else{if(a.is.plainObject(d)&&(a.is.array(d.nodes)||a.is.array(d.edges))){var l=d;var n=[];var o=["nodes","edges"];for(var h=0,p=o.length;h<p;h++){var r=o[h];var m=l[r];if(a.is.array(m)){for(var f=0,g=m.length;f<g;f++){var s=m[f];var k=a.util.extend({},s,{group:r});n.push(k)}}}c=new a.Collection(e,n)}else{var s=d;c=(new a.Element(e,s)).collection()}}}return c.filter(function(){return !this.removed()
})},remove:function(d){if(!a.is.elementOrCollection(d)){d=d}else{if(a.is.string(d)){var c=d;d=this.$(c)}}return d.remove()},load:function(f,g,e){var i=this;var d=i.elements();if(d.length>0){d.remove()}i.notifications(false);var c=[];if(f!=null){if(a.is.plainObject(f)||a.is.array(f)){i.add(f)}}function h(){i.one("layoutready",function(j){i.notifications(true);i.trigger(j);i.notify({type:"load",collection:i.elements(),style:i._private.style});i.one("load",g);i.trigger("load")}).one("layoutstop",function(){i.one("done",e);
i.trigger("done")});i.layout(i._private.options.layout)}if(b&&b.chrome){setTimeout(function(){h()},30)}else{h()}return this}})})(cytoscape,typeof window==="undefined"?null:window);(function(a){a.fn.core({addToAnimationPool:function(b){var h=this;var c=h._private.aniEles;var e=[];for(var d=0;d<c.length;d++){var g=c[d]._private.data.id;e[g]=true}for(var d=0;d<b.length;d++){var f=b[d];var g=f._private.data.id;if(!e[g]){c.push(f)}}},startAnimationLoop:function(){var g=this;var f=10;var l=false;var i=true;
g._private.aniEles=[];var j=typeof window==="undefined"?function(){}:(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame);if(j==null||!i){j=function(m){window.setTimeout(function(){m(+new Date)},f)}}var c=g.container();function k(){function m(){j(function(n){d(n);k()},c)}if(l){setTimeout(function(){m()},f)}else{m()}}k();function d(p){var z=g._private.aniEles;for(var v=0;v<z.length;v++){var y=z[v];var w=y._private.animation.current;
var u=y._private.animation.queue;if(w.length===0){var n=u;var t=n.length>0?n.shift():null;if(t!=null){t.callTime=+new Date;w.push(t)}}var x=[];for(var s=0;s<w.length;s++){var r=w[s];e(y,r,p);if(w[s].done){x.push(r);w.splice(s,1);s--}}for(var s=0;s<x.length;s++){var r=x[s];var o=r.params.complete;if(a.is.fn(o)){o.apply(y,[p])}}}if(z.length>0){g.notify({type:"draw",collection:z})}for(var s=0;s<z.length;s++){var y=z[s];var u=y._private.animation.queue;var w=y._private.animation.current;var m=w.length>0||u.length>0;
if(!m){z.splice(s,1);s--}}}function e(D,w,s){var n=g.style();var A=w.properties;var v=w.params;var t=w.callTime;var z;if(w.duration===0){z=1}else{z=Math.min(1,(s-t)/w.duration)}if(A.delay==null){var y=w.startPosition;var r=A.position;var C=D._private.position;if(r){if(b(y.x,r.x)){C.x=h(y.x,r.x,z)}if(b(y.y,r.y)){C.y=h(y.y,r.y,z)}}if(A.css){var B=a.style.properties;for(var x=0;x<B.length;x++){var m=B[x].name;var u=A.css[m];if(u!==undefined){var p=w.startStyle[m];var o=h(p,u,z);n.applyBypass(D,m,o)}}}}if(a.is.fn(v.step)){v.step.apply(D,[s])
}if(z>=1){w.done=true}return z}function b(n,m){if(n==null||m==null){return false}if(a.is.number(n)&&a.is.number(m)){return true}else{if((n)&&(m)){return true}}return false}function h(o,p,v){if(a.is.number(o)&&a.is.number(p)){return o+(p-o)*v}else{if(a.is.number(o[0])&&a.is.number(p[0])){var t=o;var s=p;function n(y,r){var z=r-y;var x=y;return Math.round(v*z+x)}var m=n(t[0],s[0]);var u=n(t[1],s[1]);var w=n(t[2],s[2]);return a.util.tuple2hex([m,u,w])}}return undefined}}})})(cytoscape);(function(a){a.fn.core({data:a.define.data({field:"data",bindingEvent:"data",allowBinding:true,allowSetting:true,settingEvent:"data",settingTriggersEvent:true,triggerFnName:"trigger",allowGetting:true}),removeData:a.define.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:true}),batchData:a.define.batchData({field:"data",event:"data",triggerFnName:"trigger",immutableKeys:{id:true,source:true,target:true,parent:true},updateMappers:true}),scratch:a.define.data({field:"scratch",allowBinding:false,allowSetting:true,settingTriggersEvent:false,allowGetting:true}),removeScratch:a.define.removeData({field:"scratch",triggerEvent:false}),})
})(cytoscape);(function(a){a.fn.core({on:a.define.on(),one:a.define.on({unbindSelfOnTrigger:true}),once:a.define.on({unbindAllBindersOnTrigger:true}),off:a.define.off(),trigger:a.define.trigger(),});a.corefn.bind=a.corefn.on;a.corefn.unbind=a.corefn.off;a.define.event.aliasesOn(a.corefn)})(cytoscape);(function(a){a.fn.core({layout:function(b){var c=this;if(b==null){b=this._private.options.layout}this.initLayout(b);c.trigger("layoutstart");this._private.layout.run();return this},initLayout:function(d){if(d==null){a.util.error("Layout options must be specified to run a layout");
return}if(d.name==null){a.util.error("A `name` must be specified to run a layout");return}var c=d.name;var b=a.extension("layout",c);if(b==null){a.util.error("Can not apply layout: No such layout `%s` found; did you include its JS file?",c);return}this._private.layout=new b(a.util.extend({},d,{renderer:this._private.renderer,cy:this}));this._private.options.layout=d}})})(cytoscape);(function(a){a.fn.core({notify:function(e){if(!this._private.notificationsEnabled){return}var d=this.renderer();var f=this;
if(a.is.element(e.collection)){var b=e.collection;e.collection=new a.Collection(f,[b])}else{if(a.is.array(e.collection)){var c=e.collection;e.collection=new a.Collection(f,c)}}d.notify(e)},notifications:function(b){var c=this._private;if(b===undefined){return c.notificationsEnabled}else{c.notificationsEnabled=b?true:false}},noNotifications:function(b){this.notifications(false);b();this.notifications(true)}})})(cytoscape);(function(a){a.fn.core({renderer:function(){return this._private.renderer},initRenderer:function(c){var d=this;
var b=a.extension("renderer",c.name);if(b==null){a.util.error("Can not initialise: No such renderer `%s` found; did you include its JS file?",c.name);return}this._private.renderer=new b(a.util.extend({},c,{cy:d,style:d._private.style}))}})})(cytoscape);(function(a){a.fn.core({collection:function(b){if(a.is.string(b)){return this.$(b)}else{if(a.is.elementOrCollection(b)){return b.collection()}}return new a.Collection(this)},nodes:function(b){var c=this.$("node");if(b){return c.filter(b)}return c},edges:function(b){var c=this.$("edge");
if(b){return c.filter(b)}return c},$:function(c){var b=new a.Collection(this,this._private.elements);if(c){return b.filter(c)}return b}});a.corefn.elements=a.corefn.filter=a.corefn.$})(cytoscape);(function(a){a.fn.core({style:function(b){return this._private.style}})})(cytoscape);(function(a){a.fn.core({panningEnabled:function(b){if(b!==undefined){this._private.panEnabled=b?true:false}else{return this._private.panEnabled}return this},zoomingEnabled:function(b){if(b!==undefined){this._private.zoomEnabled=b?true:false
}else{return this._private.zoomEnabled}return this},pan:function(){var c=arguments;var g=this._private.pan;var d,f,e,b,h;switch(c.length){case 0:return g;case 1:if(!this._private.panEnabled){return this}else{if(a.is.string(c[0])){d=c[0];return g[d]}else{if(a.is.plainObject(c[0])){e=c[0];b=e.x;h=e.y;if(a.is.number(b)){g.x=b}if(a.is.number(h)){g.y=h}this.trigger("pan")}}}break;case 2:if(!this._private.panEnabled){return this}d=c[0];f=c[1];if((d==="x"||d==="y")&&a.is.number(f)){g[d]=f}this.trigger("pan");
break;default:break}this.notify({type:"viewport"});return this},panBy:function(h){var c=arguments;var g=this._private.pan;var d,f,e,b,i;if(!this._private.panEnabled){return this}switch(c.length){case 1:if(a.is.plainObject(c[0])){e=c[0];b=e.x;i=e.y;if(a.is.number(b)){g.x+=b}if(a.is.number(i)){g.y+=i}this.trigger("pan")}break;case 2:d=c[0];f=c[1];if((d==="x"||d==="y")&&a.is.number(f)){g[d]+=f}this.trigger("pan");break;default:break}this.notify({type:"viewport"});return this},fit:function(f,g){if(a.is.number(f)&&g===undefined){g=f;
f=undefined}if(!this._private.panEnabled||!this._private.zoomEnabled){return this}var i=this.boundingBox(f);var d=this.style();var b=parseFloat(d.containerCss("width"));var c=parseFloat(d.containerCss("height"));var e;g=a.is.number(g)?g:0;if(!isNaN(b)&&!isNaN(c)){e=this._private.zoom=Math.min((b-2*g)/i.w,(c-2*g)/i.h);e=e>this._private.maxZoom?this._private.maxZoom:e;e=e<this._private.minZoom?this._private.minZoom:e;this._private.pan={x:(b-e*(i.x1+i.x2))/2,y:(c-e*(i.y1+i.y2))/2}}this.trigger("pan zoom");
this.notify({type:"viewport"});return this},minZoom:function(b){if(b===undefined){return this._private.minZoom}else{if(a.is.number(b)){this._private.minZoom=b}}return this},maxZoom:function(b){if(b===undefined){return this._private.maxZoom}else{if(a.is.number(b)){this._private.maxZoom=b}}return this},zoom:function(d){var j;var k;if(d===undefined){return this._private.zoom}else{if(a.is.number(d)){k=d;j={x:0,y:0}}else{if(a.is.plainObject(d)){k=d.level;if(d.renderedPosition){var l=d.renderedPosition;
var b=this._private.pan;var i=this._private.zoom;j={x:(l.x-b.x)/i,y:(l.y-b.y)/i}}else{if(d.position){j=d.position}}if(j&&!this._private.panEnabled){return this}}}}if(!this._private.zoomEnabled){return this}if(!a.is.number(k)||!a.is.number(j.x)||!a.is.number(j.y)){return this}k=k>this._private.maxZoom?this._private.maxZoom:k;k=k<this._private.minZoom?this._private.minZoom:k;var g=this._private.pan;var h=this._private.zoom;var f=k;var e={x:-f/h*(j.x-g.x)+j.x,y:-f/h*(j.y-g.y)+j.y};this._private.zoom=k;
this._private.pan=e;var c=g.x!==e.x||g.y!==e.y;this.trigger("zoom"+(c?" pan":""));this.notify({type:"viewport"});return this},boundingBox:function(c){var b=this.$(c);return b.boundingBox()},center:function(f){if(!this._private.panEnabled||!this._private.zoomEnabled){return this}var g=this.boundingBox(f);var d=this.style();var b=parseFloat(d.containerCss("width"));var c=parseFloat(d.containerCss("height"));var e=this._private.zoom;this.pan({x:(b-e*(g.x1+g.x2))/2,y:(c-e*(g.y1+g.y2))/2});this.trigger("pan");
this.notify({type:"viewport"});return this},reset:function(){if(!this._private.panEnabled||!this._private.zoomEnabled){return this}this.pan({x:0,y:0});if(this._private.maxZoom>1&&this._private.minZoom<1){this.zoom(1)}this.notify({type:"viewport"});return this}})})(cytoscape);(function(b){b.fn.collection=b.fn.eles=function(c,e){for(var d in c){var f=c[d];b.Collection.prototype[d]=f}};var a={prefix:{nodes:"n",edges:"e"},id:{nodes:0,edges:0},generate:function(h,d,g){var c=b.is.element(d)?d._private:d;
var e=c.group;var f=g!=null?g:this.prefix[e]+this.id[e];if(h.getElementById(f).empty()){this.id[e]++}else{while(!h.getElementById(f).empty()){f=this.prefix[e]+(++this.id[e])}}return f}};b.Element=function(d,f,h){if(!(this instanceof b.Element)){return new b.Element(d,f,h)}var n=this;h=(h===undefined||h?true:false);if(d===undefined||f===undefined||!b.is.core(d)){b.util.error("An element must have a core reference and parameters set");return}if(f.group!=="nodes"&&f.group!=="edges"){b.util.error("An element must be of type `nodes` or `edges`; you specified `"+f.group+"`");
return}this.length=1;this[0]=this;this._private={cy:d,single:true,data:f.data||{},position:f.position||{},autoWidth:undefined,autoHeight:undefined,listeners:[],group:f.group,style:{},removed:true,selected:f.selected?true:false,selectable:f.selectable===undefined?true:(f.selectable?true:false),locked:f.locked?true:false,grabbed:false,grabbable:f.grabbable===undefined?true:(f.grabbable?true:false),classes:{},animation:{current:[],queue:[]},rscratch:{},scratch:{},edges:[],children:[]};if(f.renderedPosition){var o=f.renderedPosition;
var j=d.pan();var m=d.zoom();this._private.position={x:(o.x-j.x)/m,y:(o.y-j.y)/m}}if(b.is.string(f.classes)){var e=f.classes.split(/\s+/);for(var g=0,c=e.length;g<c;g++){var k=e[g];if(!k||k===""){continue}n._private.classes[k]=true}}if(h===undefined||h){this.restore()}};b.Collection=function(h,c){if(!(this instanceof b.Collection)){return new b.Collection(h,c)}if(h===undefined||!b.is.core(h)){b.util.error("A collection must have a reference to the core");return}var d={};var f=[];var o=false;if(!c){c=[]
}else{if(c.length>0&&b.is.plainObject(c[0])&&!b.is.element(c[0])){o=true;var s=[];var j={};for(var n=0,g=c.length;n<g;n++){var p=c[n];if(p.data==null){p.data={}}var m=p.data;if(m.id==null){m.id=a.generate(h,p)}else{if(h.getElementById(m.id).length!=0||j[m.id]){continue}}var r=new b.Element(h,p,false);s.push(r);j[m.id]=true}c=s}}for(var n=0,g=c.length;n<g;n++){var k=c[n];if(!k){continue}var e=k._private.data.id;if(!d[e]){d[e]=k;f.push(k)}}for(var n=0,g=f.length;n<g;n++){this[n]=f[n]}this.length=f.length;
this._private={cy:h,ids:d};if(o){this.restore()}};b.elefn=b.elesfn=b.Element.prototype=b.Collection.prototype;b.elesfn.cy=function(){return this._private.cy};b.elesfn.element=function(){return this[0]};b.elesfn.collection=function(){if(b.is.collection(this)){return this}else{return new b.Collection(this._private.cy,[this])}};b.elesfn.json=function(){var g=this.element();if(g==null){return undefined}var h=g._private;var f=b.util.copy({data:h.data,position:h.position,group:h.group,bypass:h.bypass,removed:h.removed,selected:h.selected,selectable:h.selectable,locked:h.locked,grabbed:h.grabbed,grabbable:h.grabbable,classes:"",scratch:h.scratch});
var e=[];for(var c in h.classes){e.push(c)}for(var d=0;d<e.length;d++){var c=e[d];f.classes+=c+(d<e.length-1?" ":"")}return f};b.elesfn.restore=function(r){var p=this;var E=[];var e=p.cy();if(r===undefined){r=true}var n=[];var u=0;var d=0;for(var B=0,x=p.length;B<x;B++){var m=p[B];if(m.isNode()){n.unshift(m);u++}else{n.push(m);d++}}for(var B=0,x=n.length;B<x;B++){var m=n[B];if(!m.removed()){continue}var o=m._private;var F=o.data;if(F.id===undefined){F.id=a.generate(e,m)}else{if(b.is.emptyString(F.id)||!b.is.string(F.id)){continue
}else{if(e.getElementById(F.id).length!=0){continue}}}var s=F.id;if(m.isEdge()){var g=m;var t=["source","target"];var v=t.length;for(var y=0;y<v;y++){var c=t[y];var G=F[c];if(G==null||G===""){continue}else{if(e.getElementById(G).empty()){continue}}}var h=e.getElementById(F.source);var A=e.getElementById(F.target);h._private.edges.push(g);A._private.edges.push(g)}o.ids={};o.ids[F.id]=m;o.removed=false;e.addToPool(m);E.push(m)}for(var B=0;B<u;B++){var w=n[B];var F=w._private.data;var s=F.id;var z=w._private.data.parent;
var f=z!=null;if(f){var k=e.getElementById(z);if(k.empty()){delete F.parent}else{var C=false;var D=k;while(!D.empty()){if(w.same(D)){C=true;delete F.parent;break}D=D.parent()}if(!C){k[0]._private.children.push(w)}}}}E=new b.Collection(e,E);if(E.length>0){E.updateStyle(false);E.connectedNodes().updateStyle(r);if(r){E.rtrigger("add")}else{E.trigger("add")}}return p};b.elesfn.removed=function(){var c=this[0];return c&&c._private.removed};b.elesfn.inside=function(){var c=this[0];return c&&!c._private.removed
};b.elesfn.remove=function(j){var s=this;var n=[];var d=[];var e={};var g=s._private.cy;if(j===undefined){j=true}function k(w){var l=w._private.edges;for(var v=0;v<l.length;v++){r(l[v])}}function u(w){var v=w._private.children;for(var l=0;l<v.length;l++){r(v[l])}}function r(i){var l=e[i.id()];if(l){return}else{e[i.id()]=true}if(i.isNode()){d.push(i);k(i);u(i)}else{d.unshift(i)}}for(var m=0,f=s.length;m<f;m++){var t=s[m];r(t)}function p(x,w){var i=x._private.edges;for(var l=0;l<i.length;l++){var v=i[l];
if(w===v){i.splice(l,1);break}}}for(var m=0;m<d.length;m++){var t=d[m];t._private.removed=true;g.removeFromPool(t);n.push(t);if(t.isEdge()){var c=t.source()[0];var h=t.target()[0];p(c,t);p(h,t)}}var o=new b.Collection(this.cy(),n);if(o.size()>0){if(j){this.cy().notify({type:"remove",collection:o})}o.trigger("remove")}return this}})(cytoscape);(function(a){a.fn.eles({animated:function(){var b=this[0];if(b){return b._private.animation.current.length>0}},clearQueue:function(){for(var b=0;b<this.length;
b++){var c=this[b];c._private.animation.queue=[]}return this},delay:function(c,b){this.animate({delay:c},{duration:c,complete:b});return this},animate:function(j,e){var c=+new Date;var d=this._private.cy;var b=d.style();if(e===undefined){e={}}if(e.duration===undefined){e.duration=400}switch(e.duration){case"slow":e.duration=600;break;case"fast":e.duration=200;break}if(j==null||(j.position==null&&j.css==null&&j.delay==null)){return this}if(j.css){j.css=b.getValueStyle(j.css)}for(var h=0;h<this.length;
h++){var l=this[h];var k=l._private.position;var g={x:k.x,y:k.y};var f=b.getValueStyle(l);if(l.animated()&&(e.queue===undefined||e.queue)){q=l._private.animation.queue}else{q=l._private.animation.current}q.push({properties:j,duration:e.duration,params:e,callTime:c,startPosition:g,startStyle:f})}d.addToAnimationPool(this);return this},stop:function(f,h){for(var e=0;e<this.length;e++){var c=this[e];var b=c._private.animation.current;for(var d=0;d<b.length;d++){var g=b[d];if(h){g.duration=0}}if(f){c._private.animation.queue=[]
}}this.cy().notify({collection:this,type:"draw"});return this}})})(cytoscape);(function(a){a.fn.eles({addClass:function(g){g=g.split(/\s+/);var c=this;var k=[];for(var f=0;f<g.length;f++){var b=g[f];if(a.is.emptyString(b)){continue}for(var d=0;d<c.length;d++){var h=c[d];var e=h._private.classes[b];h._private.classes[b]=true;if(!e){k.push(h)}}}new a.Collection(this._private.cy,k).updateStyle();c.trigger("class");return c},hasClass:function(b){var c=this[0];return c!=null&&c._private.classes[b]},toggleClass:function(h,g){var b=h.split(/\s+/);
var n=this;var e=[];for(var f=0,k=n.length;f<k;f++){var o=n[f];for(var c=0;c<b.length;c++){var m=b[c];if(a.is.emptyString(m)){continue}var d=o._private.classes[m];var l=g||(g===undefined&&!d);if(l){o._private.classes[m]=true;if(!d){e.push(o)}}else{o._private.classes[m]=false;if(d){e.push(o)}}}}new a.Collection(this._private.cy,e).updateStyle();n.trigger("class");return n},removeClass:function(g){g=g.split(/\s+/);var c=this;var k=[];for(var f=0;f<c.length;f++){var h=c[f];for(var d=0;d<g.length;d++){var b=g[d];
if(!b||b===""){continue}var e=h._private.classes[b];delete h._private.classes[b];if(e){k.push(h)}}}new a.Collection(c._private.cy,k).updateStyle();c.trigger("class");return c}})})(cytoscape);(function(a){a.fn.eles({allAre:function(b){return this.filter(b).length===this.length},is:function(b){return this.filter(b).length>0},same:function(b){b=this.cy().collection(b);if(this.length!==b.length){return false}return this.intersect(b).length===this.length},anySame:function(b){b=this.cy().collection(b);
return this.intersect(b).length>0},allAreNeighbors:function(b){b=this.cy().collection(b);return this.neighborhood().intersect(b).length===b.length}})})(cytoscape);(function(a){a.fn.eles({updateStyle:function(b){var d=this._private.cy;var c=d.style();b=b||b===undefined?true:false;c.apply(this);if(b){this.rtrigger("style")}else{this.trigger("style")}return this},updateMappers:function(b){var f=this._private.cy;var d=f.style();b=b||b===undefined?true:false;for(var c=0;c<this.length;c++){var e=this[c];
d.apply(e)}if(b){this.rtrigger("style")}else{this.trigger("style")}return this},data:a.define.data({field:"data",bindingEvent:"data",allowBinding:true,allowSetting:true,settingEvent:"data",settingTriggersEvent:true,triggerFnName:"trigger",allowGetting:true,immutableKeys:{id:true,source:true,target:true,parent:true},updateMappers:true}),removeData:a.define.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:true,immutableKeys:{id:true,source:true,target:true,parent:true},updateMappers:true}),batchData:a.define.batchData({field:"data",event:"data",triggerFnName:"trigger",immutableKeys:{id:true,source:true,target:true,parent:true},updateMappers:true}),scratch:a.define.data({field:"scratch",allowBinding:false,allowSetting:true,settingTriggersEvent:false,allowGetting:true}),removeScratch:a.define.removeData({field:"scratch",triggerEvent:false}),rscratch:a.define.data({field:"rscratch",allowBinding:false,allowSetting:true,settingTriggersEvent:false,allowGetting:true}),removeRscratch:a.define.removeData({field:"rscratch",triggerEvent:false}),id:function(){var b=this[0];
if(b){return b._private.data.id}},position:a.define.data({field:"position",bindingEvent:"position",allowBinding:true,allowSetting:true,settingEvent:"position",settingTriggersEvent:true,triggerFnName:"rtrigger",allowGetting:true,validKeys:["x","y"]}),positions:function(f){if(a.is.plainObject(f)){this.position(f)}else{if(a.is.fn(f)){var c=f;for(var b=0;b<this.length;b++){var d=this[b];var f=c.apply(d,[b,d]);var e=d._private.position;e.x=f.x;e.y=f.y}this.rtrigger("position")}}return this},renderedPosition:function(d){var c=this[0];
var h=this.cy();var b=h.zoom();var f=h.pan();if(c&&c.isNode()){var g=c._private.position;var e={x:g.x*b+f.x,y:g.y*b+f.y};if(d===undefined){return e}else{return e[d]}}},renderedCss:function(d){var c=this[0];if(c){var b=c.cy().style().getRenderedStyle(c);if(d===undefined){return b}else{return b[d]}}},css:function(b,f){var d=this.cy().style();if(a.is.plainObject(b)){var c=b;d.applyBypass(this,c);this.rtrigger("style")}else{if(a.is.string(b)){if(f===undefined){var e=this[0];if(e){return e._private.style[b].strValue
}else{return}}else{d.applyBypass(this,b,f);this.rtrigger("style")}}else{if(b===undefined){var e=this[0];if(e){return d.getRawStyle(e)}else{return}}}}return this},removeCss:function(){var d=this.cy().style();var b=this;for(var c=0;c<b.length;c++){var e=b[c];d.removeAllBypasses(e)}this.rtrigger("style")},show:function(){this.css("visibility","visible");return this},hide:function(){this.css("visibility","hidden");return this},visible:function(){var f=this[0];if(f){if(f.css("visibility")!=="visible"){return false
}if(f.isNode()){var c=f.parents();for(var d=0;d<c.length;d++){var e=c[d];var b=e.css("visibility");if(b!=="visible"){return false}}return true}else{if(f.isEdge()){var g=f.source();var h=f.target();return g.visible()&&h.visible()}}}},hidden:function(){var b=this[0];if(b){return !this.visible()}},width:function(){var c=this[0];if(c){var b=this._private.style.width;return b.strValue==="auto"?c._private.autoWidth:b.pxValue}},outerWidth:function(){var e=this[0];if(e){var d=this._private.style;var c=d.width.strValue==="auto"?e._private.autoWidth:d.width.pxValue;
var b=d["border-width"]?d["border-width"].pxValue:0;return c+b}},renderedWidth:function(){var c=this[0];if(c){var b=this.width();return b*this.cy().zoom()}},renderedOuterWidth:function(){var c=this[0];if(c){var b=this.outerWidth();return b*this.cy().zoom()}},height:function(){var c=this[0];if(c&&c.isNode()){var b=this._private.style.height;return b.strValue==="auto"?c._private.autoHeight:b.pxValue}},outerHeight:function(){var e=this[0];if(e){var d=this._private.style;var b=d.height.strValue==="auto"?e._private.autoHeight:d.height.pxValue;
var c=d["border-width"]?d["border-width"].pxValue:0;return b+c}},renderedHeight:function(){var c=this[0];if(c){var b=this.height();return b*this.cy().zoom()}},renderedOuterHeight:function(){var c=this[0];if(c){var b=this.outerHeight();return b*this.cy().zoom()}},offset:function(){var e=this[0];if(e&&e.isNode()){var g={x:e._private.position.x,y:e._private.position.y};var b=e.parents();for(var c=0;c<b.length;c++){var d=b[c];var f=d._private.position;g.x+=f.x;g.y+=f.y}return g}},renderedOffset:function(){var c=this[0];
if(c&&c.isNode()){var e=this.offset();var f=this.cy();var b=f.zoom();var d=f.pan();return{x:e.x*b+d.x,y:e.y*b+d.y}}},boundingBox:function(r){var p=this;if(!r||(a.is.elementOrCollection(r)&&r.length===0)){p=this}else{if(a.is.string(r)){p=this.filter(r)}else{if(a.is.elementOrCollection(r)){p=r}}}var v=Infinity;var u=-Infinity;var d=Infinity;var c=-Infinity;for(var s=0;s<p.length;s++){var l=p[s];if(l.isNode()){var f=l._private.position;var j=f.x;var g=f.y;var k=l.outerWidth();var e=k/2;var t=l.outerHeight();
var m=t/2;var o=j-e;var n=j+e;var b=g-m;var z=g+m;v=o<v?o:v;u=n>u?n:u;d=b<d?b:d;c=z>c?z:c}}return{x1:v,x2:u,y1:d,y2:c,w:u-v,h:c-d}}})})(cytoscape);(function(b){function a(d){return function(){var f=this;if(f.length===0){return}if(f.isNode()&&!f.removed()){var k=0;var j=f[0];var e=j._private.edges;for(var g=0;g<e.length;g++){var h=e[g];k+=d(j,h)}return k}else{return}}}b.fn.eles({degree:a(function(e,d){if(d.source().same(d.target())){return 2}else{return 1}}),indegree:a(function(e,d){if(d.target().same(e)){return 1
}else{return 0}}),outdegree:a(function(e,d){if(d.source().same(e)){return 1}else{return 0}})});function c(e,d){return function(){var g=undefined;var f=this.nodes();for(var h=0;h<f.length;h++){var j=f[h];var k=j[e]();if(k!==undefined&&(g===undefined||d(k,g))){g=k}}return g}}b.fn.eles({minDegree:c("degree",function(e,d){return e<d}),maxDegree:c("degree",function(e,d){return e>d}),minIndegree:c("indegree",function(e,d){return e<d}),maxIndegree:c("indegree",function(e,d){return e>d}),minOutdegree:c("outdegree",function(e,d){return e<d
}),maxOutdegree:c("outdegree",function(e,d){return e>d})});b.fn.eles({totalDegree:function(){var f=0;var d=this.nodes();for(var e=0;e<d.length;e++){f+=d[e].degree()}return f}})})(cytoscape);(function(a){a.fn.eles({on:a.define.on(),one:a.define.on({unbindSelfOnTrigger:true}),once:a.define.on({unbindAllBindersOnTrigger:true}),off:a.define.off(),trigger:a.define.trigger(),rtrigger:function(b,c){this.cy().notify({type:b,collection:this.filter(function(){return !this.removed()})});this.trigger(b,c);return this
}});a.elesfn.bind=a.elesfn.on;a.elesfn.unbind=a.elesfn.off;a.define.event.aliasesOn(a.elesfn)})(cytoscape);(function(a){a.fn.eles({isNode:function(){return this.group()==="nodes"},isEdge:function(){return this.group()==="edges"},isLoop:function(){return this.isEdge()&&this.source().id()===this.target().id()},group:function(){var b=this[0];if(b){return b._private.group}}})})(cytoscape);(function(a){a.fn.eles({each:function(d){if(a.is.fn(d)){for(var c=0;c<this.length;c++){var e=this[c];var b=d.apply(e,[c,e]);
if(b===false){break}}}return this},toArray:function(){var c=[];for(var b=0;b<this.length;b++){c.push(this[b])}return c},slice:function(f,b){var e=[];var c=this.length;if(b==null){b=c}if(f<0){f=c+f}for(var d=f;d>=0&&d<b&&d<c;d++){e.push(this[d])}return new a.Collection(this.cy(),e)},size:function(){return this.length},eq:function(b){return this[b]},empty:function(){return this.length===0},nonempty:function(){return !this.empty()}})})(cytoscape);(function(b){function c(d){return function(){var e=arguments;
if(e.length===2){var j=e[0];var g=e[1];this.bind(d.event,j,g)}else{if(e.length===1){var g=e[0];this.bind(d.event,g)}else{if(e.length===0){for(var f=0;f<this.length;f++){var h=this[f];if(!d.ableField||h._private[d.ableField]){h._private[d.field]=d.value}}this.updateStyle();this.trigger(d.event)}}}return this}}function a(d){b.elesfn[d.field]=function(){var e=this[0];if(e){return e._private[d.field]}};b.elesfn[d.on]=c({event:d.on,field:d.field,ableField:d.ableField,value:true});b.elesfn[d.off]=c({event:d.off,field:d.field,ableField:d.ableField,value:false})
}a({field:"locked",on:"lock",off:"unlock"});a({field:"grabbable",on:"grabify",off:"ungrabify"});a({field:"selected",ableField:"selectable",on:"select",off:"unselect"});a({field:"selectable",on:"selectify",off:"unselectify"});b.elesfn.grabbed=function(){var d=this[0];if(d){return d._private.grabbed}}})(cytoscape);(function(b){b.fn.eles({nodes:function(e){return this.filter(function(g,f){return f.isNode()}).filter(e)},edges:function(e){return this.filter(function(g,f){return f.isEdge()}).filter(e)},filter:function(f){var j=this._private.cy;
if(b.is.fn(f)){var h=[];for(var e=0;e<this.length;e++){var g=this[e];if(f.apply(g,[e,g])){h.push(g)}}return new b.Collection(j,h)}else{if(b.is.string(f)||b.is.elementOrCollection(f)){return new b.Selector(f).filter(this)}else{if(f===undefined){return this}}}return new b.Collection(j)},not:function(h){var k=this._private.cy;if(!h){return this}else{if(b.is.string(h)){h=this.filter(h)}var j=[];for(var g=0;g<this.length;g++){var f=this[g];var e=h._private.ids[f.id()];if(!e){j.push(f)}}return new b.Collection(k,j)
}},intersect:function(m){var o=this;var i=this._private.cy;if(b.is.string(m)){var j=m;return this.filter(j)}var e=[];var l=this;var k=m;var n=this.length<m.length;var h=n?l._private.ids:k._private.ids;var g=n?k._private.ids:l._private.ids;for(var f in h){var p=g[f];if(p){e.push(p)}}return new b.Collection(i,e)},add:function(m){var n=this;var g=this._private.cy;if(!m){return this}if(b.is.string(m)){var h=m;m=g.elements(h)}var e=[];var f={};function l(i){if(!i){return}if(!f[i.id()]){e.push(i);f[i.id()]=true
}}for(var k=0;k<n.length;k++){var j=n[k];l(j)}for(var k=0;k<m.length;k++){var j=m[k];l(j)}return new b.Collection(g,e)}});b.fn.eles({neighborhood:function(m){var e=[];var l=this._private.cy;var f=this.nodes();for(var p=0;p<f.length;p++){var k=f[p];var h=k.connectedEdges();for(var o=0;o<h.length;o++){var g=h[o];var n=g.connectedNodes().not(k);if(n.length>0){e.push(n[0])}e.push(g[0])}}return(new b.Collection(l,e)).filter(m)},closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)
},openNeighborhood:function(e){return this.neighborhood(e)}});b.fn.eles({source:d({attr:"source"}),target:d({attr:"target"})});function d(e){return function(f){var h=[];var g=this.edges();var n=this._private.cy;for(var j=0;j<g.length;j++){var k=g[j];var m=k._private.data[e.attr];var l=n.getElementById(m);if(l.length>0){h.push(l)}}return new b.Collection(n,h).filter(f)}}b.fn.eles({edgesWith:a(),edgesTo:a({thisIs:"source"})});function a(e){return function(r){var f=[];var j=this._private.cy;var g=e||{};
if(b.is.string(r)){r=j.$(r)}var l=r.connectedEdges();var s=this._private.ids;for(var m=0;m<l.length;m++){var h=l[m];var n;var o=h._private.data;if(g.thisIs){var k=o[g.thisIs];n=s[k]}else{n=s[o.source]||s[o.target]}if(n){f.push(h)}}return new b.Collection(j,f)}}b.fn.eles({connectedEdges:function(l){var e=[];var k=this._private.cy;var f=this.nodes();for(var o=0;o<f.length;o++){var h=f[o];var n=h._private.edges;for(var m=0;m<n.length;m++){var g=n[m];e.push(g)}}return new b.Collection(k,e).filter(l)},connectedNodes:function(e){var j=[];
var k=this._private.cy;var f=this.edges();for(var g=0;g<f.length;g++){var h=f[g];j.push(h.source()[0]);j.push(h.target()[0])}return new b.Collection(k,j).filter(e)},parallelEdges:c(),codirectedEdges:c({codirected:true}),parallelIndex:function(){var g=this[0];if(g.isEdge()){var e=g.source()[0];var m=e._private.edges;var l=0;for(var j=0;j<m.length;j++){var h=m[j];var o=h===g;if(o){return l}var n=g._private.data.source===h._private.data.source&&g._private.data.target===h._private.data.target;var f=g._private.data.source===h._private.data.target&&g._private.data.target===h._private.data.source;
var k=n||f;if(k){l++}}}},parallelSize:function(){var g=this[0];if(g.isEdge()){var e=g.source()[0];var m=e._private.edges;var j=0;for(var k=0;k<m.length;k++){var h=m[k];var n=g._private.data.source===h._private.data.source&&g._private.data.target===h._private.data.target;var f=g._private.data.source===h._private.data.target&&g._private.data.target===h._private.data.source;var l=n||f;if(l){j++}}return j}}});function c(f){var e={codirected:false};f=b.util.extend({},e,f);return function(A){var l=this._private.cy;
var u=[];var k=this.edges();var v=f;for(var B=0;B<k.length;B++){var t=k[B];var C=t.source()[0];var r=C.id();var y=t.target()[0];var n=y.id();var x=C._private.edges;for(var z=0;z<x.length;z++){var s=x[z];var g=s._private.data;var m=g.target;var o=g.source;var h=m===n&&o===r;var w=r===m&&n===o;if((v.codirected&&h)||(!v.codirected&&(h||w))){u.push(s)}}}return new b.Collection(l,u).filter(A)}}b.fn.eles({parent:function(e){var f=[];var k=this._private.cy;for(var g=0;g<this.length;g++){var j=this[g];var h=k.getElementById(j._private.data.parent);
if(h.size()>0){f.push(h)}}return new b.Collection(k,f).filter(e)},parents:function(f){var g=[];var e=this.parent();while(e.nonempty()){for(var h=0;h<e.length;h++){var j=e[h];g.push(j)}e=e.parent()}return new b.Collection(this.cy(),g).filter(f)},children:function(e){var g=[];for(var f=0;f<this.length;f++){var h=this[f];g=g.concat(h._private.children)}return new b.Collection(this.cy(),g).filter(e)},siblings:function(e){return this.parent().children().not(this).filter(e)},descendants:function(e){var f=[];
function g(h){for(var j=0;j<h.length;j++){var k=h[j];f.push(k);if(k.children().nonempty()){g(k.children())}}}g(this.children());return new b.Collection(this.cy(),f).filter(e)}})})(cytoscape);(function($$){$$.fn.selector=function(map,options){for(var name in map){var fn=map[name];$$.Selector.prototype[name]=fn}};$$.Selector=function(onlyThisGroup,selector){if(!(this instanceof $$.Selector)){return new $$.Selector(onlyThisGroup,selector)}if(selector===undefined&&onlyThisGroup!==undefined){selector=onlyThisGroup;
onlyThisGroup=undefined}var self=this;self._private={selectorText:null,invalid:true};function newQuery(){return{classes:[],colonSelectors:[],data:[],group:null,ids:[],meta:[],collection:null,filter:null,parent:null,ancestor:null,subject:null,child:null,descendant:null}}if(!selector||($$.is.string(selector)&&selector.match(/^\s*$/))){if(onlyThisGroup==null){self.length=0}else{self[0]=newQuery();self[0].group=onlyThisGroup;self.length=1}}else{if($$.is.element(selector)){var collection=new $$.Collection(self.cy(),[selector]);
self[0]=newQuery();self[0].collection=collection;self.length=1}else{if($$.is.collection(selector)){self[0]=newQuery();self[0].collection=selector;self.length=1}else{if($$.is.fn(selector)){self[0]=newQuery();self[0].filter=selector;self.length=1}else{if($$.is.string(selector)){var metaChar="[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]";var variable="(?:[\\w-]|(?:\\\\"+metaChar+"))+";var comparatorOp="=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=";var boolOp="\\?|\\!|\\^";
var string="\"(?:\\\\\"|[^\"])+\"|'(?:\\\\'|[^'])+'";var number=$$.util.regex.number;var value=string+"|"+number;var meta="degree|indegree|outdegree";var separator="\\s*,\\s*";var className=variable;var descendant="\\s+";var child="\\s+>\\s+";var subject="\\$";var id=variable;function cleanMetaChars(str){return str.replace(new RegExp("\\\\("+metaChar+")","g"),"\1")}var ops=comparatorOp.split("|");for(var i=0;i<ops.length;i++){var op=ops[i];comparatorOp+="|@"+op}var currentSubject=null;var exprs={group:{query:true,regex:"(node|edge|\\*)",populate:function(group){this.group=group=="*"?group:group+"s"
}},state:{query:true,regex:"(:selected|:unselected|:locked|:unlocked|:visible|:hidden|:grabbed|:free|:removed|:inside|:grabbable|:ungrabbable|:animated|:unanimated|:selectable|:unselectable|:parent|:child)",populate:function(state){this.colonSelectors.push(state)}},id:{query:true,regex:"\\#("+id+")",populate:function(id){this.ids.push(cleanMetaChars(id))}},className:{query:true,regex:"\\.("+className+")",populate:function(className){this.classes.push(cleanMetaChars(className))}},dataExists:{query:true,regex:"\\[\\s*("+variable+")\\s*\\]",populate:function(variable){this.data.push({field:cleanMetaChars(variable)})
}},dataCompare:{query:true,regex:"\\[\\s*("+variable+")\\s*("+comparatorOp+")\\s*("+value+")\\s*\\]",populate:function(variable,comparatorOp,value){this.data.push({field:cleanMetaChars(variable),operator:comparatorOp,value:value})}},dataBool:{query:true,regex:"\\[\\s*("+boolOp+")\\s*("+variable+")\\s*\\]",populate:function(boolOp,variable){this.data.push({field:cleanMetaChars(variable),operator:boolOp})}},metaCompare:{query:true,regex:"\\{\\s*("+meta+")\\s*("+comparatorOp+")\\s*("+number+")\\s*\\}",populate:function(meta,comparatorOp,number){this.meta.push({field:cleanMetaChars(meta),operator:comparatorOp,value:number})
}},nextQuery:{separator:true,regex:separator,populate:function(){self[++i]=newQuery();currentSubject=null}},child:{separator:true,regex:child,populate:function(){var childQuery=newQuery();childQuery.parent=this;childQuery.subject=currentSubject;self[i]=childQuery}},descendant:{separator:true,regex:descendant,populate:function(){var descendantQuery=newQuery();descendantQuery.ancestor=this;descendantQuery.subject=currentSubject;self[i]=descendantQuery}},subject:{modifier:true,regex:subject,populate:function(){if(currentSubject!=null&&this.subject!=this){$$.util.error("Redefinition of subject in selector `%s`",selector);
return false}currentSubject=this;this.subject=this},}};var j=0;for(var name in exprs){exprs[j]=exprs[name];exprs[j].name=name;j++}exprs.length=j;self._private.selectorText=selector;var remaining=selector;var i=0;function consumeExpr(expectation){var expr;var match;var name;for(var j=0;j<exprs.length;j++){var e=exprs[j];var n=e.name;if($$.is.fn(expectation)&&!expectation(n,e)){continue}var m=remaining.match(new RegExp("^"+e.regex));if(m!=null){match=m;expr=e;name=n;var consumed=m[0];remaining=remaining.substring(consumed.length);
break}}return{expr:expr,match:match,name:name}}function consumeWhitespace(){var match=remaining.match(/^\s+/);if(match){var consumed=match[0];remaining=remaining.substring(consumed.length)}}self[0]=newQuery();consumeWhitespace();for(;;){var check=consumeExpr();if(check.expr==null){$$.util.error("The selector `%s` is invalid",selector);return}else{var args=[];for(var j=1;j<check.match.length;j++){args.push(check.match[j])}var ret=check.expr.populate.apply(self[i],args);if(ret===false){return}}if(remaining.match(/^\s*$/)){break
}}self.length=i+1;for(j=0;j<self.length;j++){var query=self[j];if(query.subject!=null){for(;;){if(query.subject==query){break}if(query.parent!=null){var parent=query.parent;var child=query;child.parent=null;parent.child=child;query=parent}else{if(query.ancestor!=null){var ancestor=query.ancestor;var descendant=query;descendant.ancestor=null;ancestor.descendant=descendant;query=ancestor}else{$.error("When adjusting references for the selector `%s`, neither parent nor ancestor was found");break}}}self[j]=query.subject
}}if(onlyThisGroup!=null){for(var j=0;j<self.length;j++){if(self[j].group!=null&&self[j].group!=onlyThisGroup){$.error("Group `%s` conflicts with implicit group `%s` in selector `%s`",self[j].group,onlyThisGroup,selector);return}self[j].group=onlyThisGroup}}}else{$.error("A selector must be created from a string; found %o",selector);return}}}}}self._private.invalid=false};$$.selfn=$$.Selector.prototype;$$.selfn.size=function(){return this.length};$$.selfn.eq=function(i){return this[i]};$$.selfn.find=function(){};
$$.selfn.filter=function(collection,addLiveFunction){var self=this;var cy=collection.cy();if(self._private.invalid){return new $$.Collection(cy)}var queryMatches=function(query,element){if(query.group!=null&&query.group!="*"&&query.group!=element._private.group){return false}var allColonSelectorsMatch=true;for(var k=0;k<query.colonSelectors.length;k++){var sel=query.colonSelectors[k];var renderer=cy.renderer();switch(sel){case":selected":allColonSelectorsMatch=element.selected();break;case":unselected":allColonSelectorsMatch=!element.selected();
break;case":selectable":allColonSelectorsMatch=element.selectable();break;case":unselectable":allColonSelectorsMatch=!element.selectable();break;case":locked":allColonSelectorsMatch=element.locked();break;case":unlocked":allColonSelectorsMatch=!element.locked();break;case":visible":allColonSelectorsMatch=element.visible();break;case":hidden":allColonSelectorsMatch=!element.visible();break;case":grabbed":allColonSelectorsMatch=element.grabbed();break;case":free":allColonSelectorsMatch=!element.grabbed();
break;case":removed":allColonSelectorsMatch=element.removed();break;case":inside":allColonSelectorsMatch=!element.removed();break;case":grabbable":allColonSelectorsMatch=element.grabbable();break;case":ungrabbable":allColonSelectorsMatch=!element.grabbable();break;case":animated":allColonSelectorsMatch=element.animated();break;case":unanimated":allColonSelectorsMatch=!element.animated();break;case":parent":allColonSelectorsMatch=element.children().nonempty();break;case":child":allColonSelectorsMatch=element.parent().nonempty();
break}if(!allColonSelectorsMatch){break}}if(!allColonSelectorsMatch){return false}var allIdsMatch=true;for(var k=0;k<query.ids.length;k++){var id=query.ids[k];var actualId=element._private.data.id;allIdsMatch=allIdsMatch&&(id==actualId);if(!allIdsMatch){break}}if(!allIdsMatch){return false}var allClassesMatch=true;for(var k=0;k<query.classes.length;k++){var cls=query.classes[k];allClassesMatch=allClassesMatch&&element.hasClass(cls);if(!allClassesMatch){break}}if(!allClassesMatch){return false}function operandsMatch(params){var allDataMatches=true;
for(var k=0;k<query[params.name].length;k++){var data=query[params.name][k];var operator=data.operator;var value=data.value;var field=data.field;var matches;if(operator!=null&&value!=null){var fieldStr=""+params.fieldValue(field);var valStr=""+eval(value);var caseInsensitive=false;if(operator.charAt(0)=="@"){fieldStr=fieldStr.toLowerCase();valStr=valStr.toLowerCase();operator=operator.substring(1);caseInsensitive=true}if(operator=="="){operator="=="}switch(operator){case"*=":matches=fieldStr.search(valStr)>=0;
break;case"$=":matches=new RegExp(valStr+"$").exec(fieldStr)!=null;break;case"^=":matches=new RegExp("^"+valStr).exec(fieldStr)!=null;break;default:if(caseInsensitive){var expr="fieldStr "+operator+" valStr";matches=eval(expr)}else{var expr=params.fieldRef(field)+" "+operator+" "+value;matches=eval(expr)}}}else{if(operator!=null){switch(operator){case"?":matches=params.fieldTruthy(field);break;case"!":matches=!params.fieldTruthy(field);break;case"^":matches=params.fieldUndefined(field);break}}else{matches=!params.fieldUndefined(field)
}}if(!matches){allDataMatches=false;break}}return allDataMatches}var allDataMatches=operandsMatch({name:"data",fieldValue:function(field){return element._private.data[field]},fieldRef:function(field){return"element._private.data."+field},fieldUndefined:function(field){return element._private.data[field]===undefined},fieldTruthy:function(field){if(element._private.data[field]){return true}return false}});if(!allDataMatches){return false}var allMetaMatches=operandsMatch({name:"meta",fieldValue:function(field){return element[field]()
},fieldRef:function(field){return"element."+field+"()"},fieldUndefined:function(field){return element[field]()==undefined},fieldTruthy:function(field){if(element[field]()){return true}return false}});if(!allMetaMatches){return false}if(query.collection!=null){var matchesAny=query.collection._private.ids[element.id()]!=null;if(!matchesAny){return false}}if(query.filter!=null&&element.collection().filter(query.filter).size()==0){return false}function confirmRelations(query,elements){if(query!=null){var matches=false;
elements=elements();for(var i=0;i<elements.size();i++){if(queryMatches(query,elements.eq(i))){matches=true;break}}return matches}else{return true}}if(!confirmRelations(query.parent,function(){return element.parent()})){return false}if(!confirmRelations(query.ancestor,function(){return element.parents()})){return false}if(!confirmRelations(query.child,function(){return element.children()})){return false}if(!confirmRelations(query.descendant,function(){return element.descendants()})){return false}return true
};var selectorFunction=function(i,element){for(var j=0;j<self.length;j++){var query=self[j];if(queryMatches(query,element)){return true}}return false};if(self._private.selectorText==null){selectorFunction=function(){return true}}var filteredCollection=collection.filter(selectorFunction);return filteredCollection};$$.selfn.toString=$$.selfn.selector=function(){var str="";function clean(obj){if($$.is.string(obj)){return obj}return""}function queryToString(query){var str="";var group=clean(query.group);
str+=group.substring(0,group.length-1);for(var j=0;j<query.data.length;j++){var data=query.data[j];str+="["+data.field+clean(data.operator)+clean(data.value)+"]"}for(var j=0;j<query.meta.length;j++){var meta=query.meta[j];str+="{"+meta.field+clean(meta.operator)+clean(meta.value)+"}"}for(var j=0;j<query.colonSelectors.length;j++){var sel=query.colonSelectors[i];str+=sel}for(var j=0;j<query.ids.length;j++){var sel="#"+query.ids[i];str+=sel}for(var j=0;j<query.classes.length;j++){var sel="."+query.classes[i];
str+=sel}if(query.parent!=null){str=queryToString(query.parent)+" > "+str}if(query.ancestor!=null){str=queryToString(query.ancestor)+" "+str}if(query.child!=null){str+=" > "+queryToString(query.child)}if(query.descendant!=null){str+=" "+queryToString(query.descendant)}return str}for(var i=0;i<this.length;i++){var query=this[i];str+=queryToString(query);if(this.length>1&&i<this.length-1){str+=", "}}return str}})(cytoscape);(function(a){function b(c){}b.prototype.notify=function(c){};a("renderer","null",b)
})(cytoscape);(function(s){var l=function(){return Date.now()};var b={};var n={};var c=t.prototype;var e=5,w=0,d=2,z=4,a=2;function t(A){this.data={select:[0,0,0,0,0],renderer:this,cy:A.cy,container:A.cy.container(),canvases:new Array(e),canvasRedrawReason:new Array(e),canvasNeedsRedraw:new Array(e),bufferCanvases:new Array(a)};this.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:false,initialPan:[null,null],capture:false};this.timeoutData={panTimeout:null};this.dragData={possibleDragElements:[]};
this.touchData={start:null,capture:false,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:true,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]};this.zoomData={freeToZoom:false,lastPointerX:null};this.redraws=0;this.init();for(var B=0;B<e;B++){this.data.canvases[B]=document.createElement("canvas");this.data.canvases[B].style.position="absolute";this.data.canvases[B].id="layer"+B;this.data.canvases[B].style.zIndex=String(-B);this.data.canvases[B].style.visibility="hidden";
this.data.container.appendChild(this.data.canvases[B]);this.data.canvasRedrawReason[B]=new Array();this.data.canvasNeedsRedraw[B]=false}for(var B=0;B<a;B++){this.data.bufferCanvases[B]=document.createElement("canvas");this.data.bufferCanvases[B].style.position="absolute";this.data.bufferCanvases[B].id="buffer"+B;this.data.bufferCanvases[B].style.zIndex=String(-B);this.data.bufferCanvases[B].style.visibility="visible";this.data.container.appendChild(this.data.bufferCanvases[B])}}t.prototype.notify=function(i){if(i.type=="add"||i.type=="remove"){this.updateNodesCache();
this.updateEdgesCache()}if(i.type=="load"){this.load()}if(i.type=="viewport"){this.data.canvasNeedsRedraw[w]=true;this.data.canvasRedrawReason[w].push("viewchange")}this.data.canvasNeedsRedraw[d]=true;this.data.canvasRedrawReason[d].push("notify");this.data.canvasNeedsRedraw[z]=true;this.data.canvasRedrawReason[z].push("notify");this.redraws++;this.redraw()};t.prototype.load=function(){var i=this;i.data.container.addEventListener("mousedown",function(S){i.hoverData.capture=true;var M=i.data.cy;var U=i.projectIntoViewport(S.pageX,S.pageY);
var V=i.data.select;var R=i.findNearestElement(U[0],U[1]);var W=i.hoverData.down;var T=i.dragData.possibleDragElements;if(S.button==0){if(R&&R._private.grabbable){if(R._private.group=="nodes"&&R._private.selected==false){R._private.grabbed=true;R._private.rscratch.inDragLayer=true;R.trigger(new s.Event(S,{type:"grab"}));var L=new s.Event(S,{type:"unselect"});var K=new s.Event(S,{type:"free"});for(var P=0;P<T.length;P++){var N=T[P];var X=false;if(N._private.selected||N._private.grabbed){X=true}if(N._private.selected){N._private.selected=false;
N.trigger(L)}if(N._private.grabbed){N._private.grabbed=false;N.trigger(K)}if(X){N.updateStyle(false)}}i.dragData.possibleDragElements=T=[];i.dragData.possibleDragElements.push(R);for(var P=0;P<R._private.edges.length;P++){R._private.edges[P]._private.rscratch.inDragLayer=true}}if(R._private.group=="nodes"&&R._private.selected==true){var I=new s.Event(S,{type:"grab"});for(var P=0;P<T.length;P++){if(T[P]._private.group=="nodes"){T[P]._private.rscratch.inDragLayer=true;T[P]._private.grabbed=true;var J=T[P]._private.edges;
for(var O=0;O<J.length;O++){J[O]._private.rscratch.inDragLayer=true}T[P].trigger(I)}}}R.trigger(new s.Event(S,{type:"mousedown"}));i.data.canvasNeedsRedraw[d]=true;i.data.canvasRedrawReason[d].push("Single node moved to drag layer");i.data.canvasNeedsRedraw[z]=true;i.data.canvasRedrawReason[z].push("Single node moved to drag layer")}else{if(R==null){var Q=new s.Event(S,{type:"mousedown"});M.trigger(Q)}}i.hoverData.down=R;i.hoverData.downTime=(new Date()).getTime();if(R==null){V[4]=1}}else{if(S.button==1){i.hoverData.dragging=true;
i.hoverData.initialPan=[M.pan().x,M.pan().y]}}V[0]=V[2]=U[0];V[1]=V[3]=U[1];i.redraw()},false);window.addEventListener("mousemove",function(P){var K=i.data.cy;var R=i.projectIntoViewport(P.pageX,P.pageY);var S=i.data.select;var O=i.findNearestElement(R[0],R[1]);var U=i.hoverData.last;var T=i.hoverData.down;var V=[R[0]-S[2],R[1]-S[3]];var J=i.getCachedNodes();var L=i.getCachedEdges();var Q=i.dragData.possibleDragElements;var X=i.hoverData.capture;if(!X){var W=i.findContainerPageCoords();if(P.pageX>W[0]&&P.pageX<W[0]+i.data.container.clientWidth&&P.pageY>W[1]&&P.pageY<W[1]+i.data.container.clientHeight){}else{return
}}var I=new s.Event(P,{type:"mousemove"});if(O!=null){O.trigger(I)}else{if(O==null){K.trigger(I)}}if(i.hoverData.dragging){K.panBy({x:V[0]*K.zoom(),y:V[1]*K.zoom()});R=i.projectIntoViewport(P.pageX,P.pageY)}else{if(S[4]==1&&T==null&&(new Date()).getTime()-i.hoverData.downTime>200&&(Math.abs(S[3]-S[1])+Math.abs(S[2]-S[0])<4)){i.hoverData.dragging=true;S[4]=0}else{if(O!=U){if(U){U.trigger(new s.Event(P,{type:"mouseout"}))}if(O){O.trigger(new s.Event(P,{type:"mouseover"}))}i.hoverData.last=O}if(T){var N=new s.Event(P,{type:"position"});
for(var M=0;M<Q.length;M++){if(!Q[M]._private.locked&&Q[M]._private.group=="nodes"){Q[M]._private.position.x+=V[0];Q[M]._private.position.y+=V[1];Q[M].trigger(N)}}i.data.canvasNeedsRedraw[d]=true;i.data.canvasRedrawReason[d].push("Nodes dragged")}i.data.canvasNeedsRedraw[w]=true;i.data.canvasRedrawReason[w].push("Mouse moved, redraw selection box")}}S[2]=R[0];S[3]=R[1];i.redraw()},false);window.addEventListener("mouseup",function(Z){var U=i.hoverData.capture;if(!U){return}i.hoverData.capture=false;
var K=i.data.cy;var O=i.projectIntoViewport(Z.pageX,Z.pageY);var S=i.data.select;var aa=i.findNearestElement(O[0],O[1]);var T=i.getCachedNodes();var J=i.getCachedEdges();var N=i.dragData.possibleDragElements;var Q=i.hoverData.down;if(aa==null||aa!=Q){var M=new s.Event(Z,{type:"unselect"});for(var X=0;X<N.length;X++){if(N[X]._private.selected){N[X]._private.selected=false;N[X].trigger(M);N[X].updateStyle(false)}}if(N.length>0){i.data.canvasNeedsRedraw[z]=true;i.data.canvasRedrawReason[z].push("De-select")
}i.dragData.possibleDragElements=N=[]}if(Math.pow(S[2]-S[0],2)+Math.pow(S[3]-S[1],2)==0){var I=new s.Event(Z,{type:"click"});if(aa!=null){aa.trigger(I)}else{if(aa==null){K.trigger(I)}}}var L=new s.Event(Z,{type:"mouseup"});if(aa!=null){aa.trigger(L)}else{if(aa==null){K.trigger(L)}}if(aa==Q&&(Math.pow(S[2]-S[0],2)+Math.pow(S[3]-S[1],2)<7)){if(aa!=null&&aa._private.selectable&&aa._private.selected==false){aa._private.selected=true;aa.trigger(new s.Event(Z,{type:"select"}));aa.updateStyle(false);i.data.canvasNeedsRedraw[z]=true;
i.data.canvasRedrawReason[z].push("sglslct")}}else{if(aa==Q){if(aa!=null&&aa._private.grabbed){var Y=new s.Event(Z,{type:"free"});aa._private.grabbed=false;aa.trigger(Y);var R=aa._private.edges;for(var W=0;W<R.length;W++){R[W]._private.rscratch.inDragLayer=false}}}}if(Math.pow(S[2]-S[0],2)+Math.pow(S[3]-S[1],2)>7&&S[4]){var P=i.getAllInBox(S[0],S[1],S[2],S[3]);var V=new s.Event(Z,{type:"select"});for(var X=0;X<P.length;X++){if(P[X]._private.selectable){P[X]._private.selected=true;P[X].trigger(V);
P[X].updateStyle(false);N.push(P[X])}}if(P.length>0){i.data.canvasNeedsRedraw[z]=true;i.data.canvasRedrawReason[z].push("Selection")}}i.hoverData.dragging=false;if(!S[4]){var Y=new s.Event(Z,{type:"free"});for(var X=0;X<N.length;X++){if(N[X]._private.group=="nodes"){N[X]._private.rscratch.inDragLayer=false;var R=N[X]._private.edges;for(var W=0;W<R.length;W++){R[W]._private.rscratch.inDragLayer=false}}else{if(N[X]._private.group=="edges"){N[X]._private.rscratch.inDragLayer=false}}N[X].trigger(Y)}i.data.canvasNeedsRedraw[d]=true;
i.data.canvasRedrawReason[d].push("Node/nodes back from drag");i.data.canvasNeedsRedraw[z]=true;i.data.canvasRedrawReason[z].push("Node/nodes back from drag")}S[4]=0;i.hoverData.down=null;i.data.canvasNeedsRedraw[w]=true;i.data.canvasRedrawReason[w].push("Mouse up, selection box gone");i.redraw()},false);var F=function(K){var M=i.data.cy;var L=i.projectIntoViewport(K.pageX,K.pageY);var J=[L[0]*M.zoom()+M.pan().x,L[1]*M.zoom()+M.pan().y];if(i.zoomData.freeToZoom){K.preventDefault();var I=K.wheelDeltaY/1000||K.detail/-8.4;
M.zoom({level:M.zoom()*Math.pow(10,I),position:{x:J[0],y:J[1]}})}};i.data.container.addEventListener("mousewheel",F,false);i.data.container.addEventListener("DOMMouseScroll",F,false);i.data.container.addEventListener("mousemove",function(I){if(i.zoomData.lastPointerX&&i.zoomData.lastPointerX!=I.pageX&&!i.zoomData.freeToZoom){i.zoomData.freeToZoom=true}i.zoomData.lastPointerX=I.pageX},false);i.data.container.addEventListener("mouseout",function(I){i.zoomData.freeToZoom=false;i.zoomData.lastPointerX=null
},false);i.data.container.addEventListener("mouseout",function(I){cy.trigger(new s.Event(I,{type:"mouseout"}))},false);i.data.container.addEventListener("mouseover",function(I){cy.trigger(new s.Event(I,{type:"mouseover"}))},false);var D,H,E,A;var G;var C;function B(J,L,I,K){return Math.sqrt((I-J)*(I-J)+(K-L)*(K-L))}i.data.container.addEventListener("touchstart",function(S){S.preventDefault();i.touchData.capture=true;var L=i.data.cy;var I=i.getCachedNodes();var O=i.getCachedEdges();var J=i.touchData.now;
var M=i.touchData.earlier;if(S.touches[0]){var U=i.projectIntoViewport(S.touches[0].pageX,S.touches[0].pageY);J[0]=U[0];J[1]=U[1]}if(S.touches[1]){var U=i.projectIntoViewport(S.touches[1].pageX,S.touches[1].pageY);J[2]=U[0];J[3]=U[1]}if(S.touches[2]){var U=i.projectIntoViewport(S.touches[2].pageX,S.touches[2].pageY);J[4]=U[0];J[5]=U[1]}if(S.touches[1]){D=J[0];H=J[1];E=J[2];A=J[3];G=B(D,H,E,A);C=[(D+E)/2,(H+A)/2]}if(S.touches[2]){}else{if(S.touches[1]){}else{if(S.touches[0]){var R=i.findNearestElement(J[0],J[1]);
if(R!=null){i.touchData.start=R;if(R._private.group=="nodes"){var K=new s.Event(S,{type:"unselect"});for(var Q=0;Q<I.length;Q++){if(I[Q]._private.selected&&I[Q]._private.data.id!=R._private.data.id){I[Q]._private.selected=false;I[Q].trigger(K);I[Q].updateStyle(false)}}R._private.grabbed=true;R._private.rscratch.inDragLayer=true;R.trigger(new s.Event(S,{type:"grab"}));i.data.canvasNeedsRedraw[d]=true;i.data.canvasRedrawReason[d].push("touchdrag node start");i.data.canvasNeedsRedraw[z]=true;i.data.canvasRedrawReason[z].push("touchdrag node start");
var P=R._private.edges;for(var N=0;N<P.length;N++){P[N]._private.rscratch.inDragLayer=true}}R.trigger(new s.Event(S,{type:"touchstart"}))}else{if(R==null){L.trigger(new s.Event(S,{type:"touchstart"}))}}for(var Q=0;Q<J.length;Q++){M[Q]=J[Q];i.touchData.startPosition[Q]=J[Q]}i.touchData.singleTouchMoved=false;i.touchData.singleTouchStartTime=l();var T=setTimeout(function(){if(i.touchData.singleTouchMoved==false&&l()-i.touchData.singleTouchStartTime<1040&&l()-i.touchData.singleTouchStartTime>960){if(i.touchData.start){i.touchData.start.trigger(new s.Event(S,{type:"taphold"}))
}else{i.data.cy.trigger(new s.Event(S,{type:"taphold"}))}}},1000)}}}i.redraw()},true);window.addEventListener("touchmove",function(ak){var Z=i.touchData.capture;if(!Z){return}ak.preventDefault();var L=i.data.cy;var Y=i.getCachedNodes();var K=i.getCachedEdges();var J=i.touchData.now;var ah=i.touchData.earlier;if(ak.touches[0]){var R=i.projectIntoViewport(ak.touches[0].pageX,ak.touches[0].pageY);J[0]=R[0];J[1]=R[1]}if(ak.touches[1]){var R=i.projectIntoViewport(ak.touches[1].pageX,ak.touches[1].pageY);
J[2]=R[0];J[3]=R[1]}if(ak.touches[2]){var R=i.projectIntoViewport(ak.touches[2].pageX,ak.touches[2].pageY);J[4]=R[0];J[5]=R[1]}var ac=[];for(var ad=0;ad<J.length;ad++){ac[ad]=J[ad]-ah[ad]}if(ak.touches[1]){var I=J[0],T=J[1];var W=J[2],an=J[3];var X=Math.sqrt(Math.pow(I-W,2)+Math.pow(T-an,2));var V=X/G;var U=I-D;var S=T-H;var ai=W-E;var ag=an-A;var am=(U+ai)/2;var al=(S+ag)/2;var af=1.5;if(V>1){V=(V-1)*af+1}else{V=1-(1-V)*af}var N=C[0];var M=C[1];var Q=L.zoom();var P=Q*V;var ab=L.pan();var aa={x:-P/Q*(N-ab.x-am)+N,y:-P/Q*(M-ab.y-al)+M};
L._private.zoom=P;L._private.pan=aa;L.trigger("pan zoom").notify("viewport");if(ak.touches[0]){var R=i.projectIntoViewport(ak.touches[0].pageX,ak.touches[0].pageY);J[0]=R[0];J[1]=R[1]}if(ak.touches[1]){var R=i.projectIntoViewport(ak.touches[1].pageX,ak.touches[1].pageY);J[2]=R[0];J[3]=R[1]}if(ak.touches[2]){var R=i.projectIntoViewport(ak.touches[2].pageX,ak.touches[2].pageY);J[4]=R[0];J[5]=R[1]}}else{if(ak.touches[0]){var O=i.touchData.start;if(O!=null&&O._private.group=="nodes"){O._private.position.x+=ac[0];
O._private.position.y+=ac[1];i.data.canvasNeedsRedraw[d]=true;i.data.canvasRedrawReason[d].push("touchdrag node");O.trigger(new s.Event(ak,{type:"position"}))}if(O!=null){O.trigger(new s.Event(ak,{type:"touchmove"}))}if(O==null){var aj=i.findNearestElement(J[0],J[1]);if(aj!=null){aj.trigger(new s.Event(ak,{type:"touchmove"}))}if(aj==null){L.trigger(new s.Event(ak,{type:"touchmove"}))}}for(var ae=0;ae<J.length;ae++){if(J[ae]&&i.touchData.startPosition[ae]&&Math.abs(J[ae]-i.touchData.startPosition[ae])>4){i.touchData.singleTouchMoved=true
}}if(O==null){L.panBy({x:ac[0]*L.zoom(),y:ac[1]*L.zoom()});var R=i.projectIntoViewport(ak.touches[0].pageX,ak.touches[0].pageY);J[0]=R[0];J[1]=R[1]}}}for(var ad=0;ad<J.length;ad++){ah[ad]=J[ad]}i.redraw()},true);window.addEventListener("touchend",function(R){var T=i.touchData.capture;if(!T){return}i.touchData.capture=false;R.preventDefault();var L=i.data.cy;var I=i.getCachedNodes();var O=i.getCachedEdges();var K=i.touchData.now;var M=i.touchData.earlier;if(R.touches[0]){var S=i.projectIntoViewport(R.touches[0].pageX,R.touches[0].pageY);
K[0]=S[0];K[1]=S[1]}if(R.touches[1]){var S=i.projectIntoViewport(R.touches[1].pageX,R.touches[1].pageY);K[2]=S[0];K[3]=S[1]}if(R.touches[2]){var S=i.projectIntoViewport(R.touches[2].pageX,R.touches[2].pageY);K[4]=S[0];K[5]=S[1]}if(R.touches[2]){}else{if(R.touches[1]){}else{if(R.touches[0]){}else{if(!R.touches[0]){var J=i.touchData.start;if(J!=null){if(J._private.grabbed==true){J._private.grabbed=false;J.trigger(new s.Event(R,{type:"free"}))}var P=J._private.edges;for(var N=0;N<P.length;N++){P[N]._private.rscratch.inDragLayer=false
}i.data.canvasNeedsRedraw[d]=true;i.data.canvasRedrawReason[d].push("touchdrag node end");i.data.canvasNeedsRedraw[z]=true;i.data.canvasRedrawReason[z].push("touchdrag node end");J.trigger(new s.Event(R,{type:"touchend"}));i.touchData.start=null}else{var Q=i.findNearestElement(K[0],K[1]);if(Q!=null){Q.trigger(new s.Event(R,{type:"touchend"}))}if(Q==null){L.trigger(new s.Event(R,{type:"touchend"}))}}if(J!=null&&J._private.selectable&&J._private.selected==false&&(Math.sqrt(Math.pow(i.touchData.startPosition[0]-K[0],2)+Math.pow(i.touchData.startPosition[1]-K[1],2)))<6){J._private.selected=true;
J.trigger(new s.Event(R,{type:"select"}));J.updateStyle(false);i.data.canvasNeedsRedraw[z]=true;i.data.canvasRedrawReason[z].push("sglslct")}if(i.touchData.singleTouchMoved==false){if(J){J.trigger(new s.Event(R,{type:"tap"}))}else{L.trigger(new s.Event(R,{type:"tap"}))}}i.touchData.singleTouchMoved=true}}}}for(var N=0;N<K.length;N++){M[N]=K[N]}i.redraw()},true)};t.prototype.init=function(){};t.prototype.getCachedNodes=function(){var i=this.data;var A=this.data.cy;if(i.cache==undefined){i.cache={}
}if(i.cache.cachedNodes==undefined){i.cache.cachedNodes=A.nodes()}return i.cache.cachedNodes};t.prototype.updateNodesCache=function(){var i=this.data;var A=this.data.cy;if(i.cache==undefined){i.cache={}}i.cache.cachedNodes=A.nodes()};t.prototype.getCachedEdges=function(){var i=this.data;var A=this.data.cy;if(i.cache==undefined){i.cache={}}if(i.cache.cachedEdges==undefined){i.cache.cachedEdges=A.edges()}return i.cache.cachedEdges};t.prototype.updateEdgesCache=function(){var i=this.data;var A=this.data.cy;
if(i.cache==undefined){i.cache={}}i.cache.cachedEdges=A.edges()};t.prototype.projectIntoViewport=function(C,A){var i,G;var D=0;var B=0;var F;F=this.data.container;var E=false;while(F!=null){if(typeof(F.offsetLeft)=="number"){D+=F.offsetLeft;B+=F.offsetTop;if(F==document.body||F==document.header){E=true}if(!E){D-=F.scrollLeft;B-=F.scrollTop}}F=F.offsetParent}i=C-D;G=A-B;i-=this.data.cy.pan().x;G-=this.data.cy.pan().y;i/=this.data.cy.zoom();G/=this.data.cy.zoom();return[i,G]};t.prototype.findContainerPageCoords=function(){var i,E;
var B=0;var A=0;var D;D=this.data.container;var C=false;while(D!=null){if(typeof(D.offsetLeft)=="number"){B+=D.offsetLeft;A+=D.offsetTop;if(D==document.body||D==document.header){C=true}if(!C){B-=D.scrollLeft;A-=D.scrollTop}}D=D.offsetParent}return[B,A]};t.prototype.findNearestElement=function(A,G){var F=this.data;var C=this.getCachedNodes();var B=this.getCachedEdges();var E=[];for(var D=0;D<C.length;D++){if(n[C[D]._private.style.shape.value].checkPointRough(A,G,C[D]._private.style["border-width"].value,C[D]._private.style.width.value,C[D]._private.style.height.value,C[D]._private.position.x,C[D]._private.position.y)&&n[C[D]._private.style.shape.value].checkPoint(A,G,C[D]._private.style["border-width"].value,C[D]._private.style.width.value/2,C[D]._private.style.height.value/2,C[D]._private.position.x,C[D]._private.position.y)){E.push(C[D])
}}for(var D=0;D<B.length;D++){if(B[D]._private.rscratch.isSelfEdge){if((this.inBezierVicinity(A,G,B[D]._private.rscratch.startX,B[D]._private.rscratch.startY,B[D]._private.rscratch.cp2ax,B[D]._private.rscratch.cp2ay,B[D]._private.rscratch.selfEdgeMidX,B[D]._private.rscratch.selfEdgeMidY,Math.pow(B[D]._private.style.width.value/2,2))&&(Math.pow(B[D]._private.style.width.value/2,2)>this.sqDistanceToQuadraticBezier(A,G,B[D]._private.rscratch.startX,B[D]._private.rscratch.startY,B[D]._private.rscratch.cp2ax,B[D]._private.rscratch.cp2ay,B[D]._private.rscratch.selfEdgeMidX,B[D]._private.rscratch.selfEdgeMidY)))||(this.inBezierVicinity(A,G,B[D]._private.rscratch.selfEdgeMidX,B[D]._private.rscratch.selfEdgeMidY,B[D]._private.rscratch.cp2cx,B[D]._private.rscratch.cp2cy,B[D]._private.rscratch.endX,B[D]._private.rscratch.endY,Math.pow(B[D]._private.style.width.value/2,2))&&(Math.pow(B[D]._private.style.width.value/2,2)>this.sqDistanceToQuadraticBezier(A,G,B[D]._private.rscratch.selfEdgeMidX,B[D]._private.rscratch.selfEdgeMidY,B[D]._private.rscratch.cp2cx,B[D]._private.rscratch.cp2cy,B[D]._private.rscratch.endX,B[D]._private.rscratch.endY)))){E.push(B[D])
}}else{if(B[D]._private.rscratch.isStraightEdge){if(Math.pow(B[D]._private.style.width.value/2,2)>this.sqDistanceToFiniteLine(A,G,B[D]._private.rscratch.startX,B[D]._private.rscratch.startY,B[D]._private.rscratch.endX,B[D]._private.rscratch.endY)){E.push(B[D])}}else{if(B[D]._private.rscratch.isBezierEdge){if(this.inBezierVicinity(A,G,B[D]._private.rscratch.startX,B[D]._private.rscratch.startY,B[D]._private.rscratch.cp2x,B[D]._private.rscratch.cp2y,B[D]._private.rscratch.endX,B[D]._private.rscratch.endY,Math.pow(B[D]._private.style.width.value/2,2))&&(Math.pow(B[D]._private.style.width.value/2,2)>this.sqDistanceToQuadraticBezier(A,G,B[D]._private.rscratch.startX,B[D]._private.rscratch.startY,B[D]._private.rscratch.cp2x,B[D]._private.rscratch.cp2y,B[D]._private.rscratch.endX,B[D]._private.rscratch.endY))){E.push(B[D])
}}}}if(!E.length||E[E.length-1]!=B[D]){if((b[B[D]._private.style["source-arrow-shape"].value].roughCollide(A,G,B[D]._private.rscratch.arrowStartX,B[D]._private.rscratch.arrowStartY,this.getArrowWidth(B[D]._private.style.width.value),this.getArrowHeight(B[D]._private.style.width.value),[B[D]._private.rscratch.arrowStartX-B[D].source()[0]._private.position.x,B[D]._private.rscratch.arrowStartY-B[D].source()[0]._private.position.y],0)&&b[B[D]._private.style["source-arrow-shape"].value].collide(A,G,B[D]._private.rscratch.arrowStartX,B[D]._private.rscratch.arrowStartY,this.getArrowWidth(B[D]._private.style.width.value),this.getArrowHeight(B[D]._private.style.width.value),[B[D]._private.rscratch.arrowStartX-B[D].source()[0]._private.position.x,B[D]._private.rscratch.arrowStartY-B[D].source()[0]._private.position.y],0))||(b[B[D]._private.style["target-arrow-shape"].value].roughCollide(A,G,B[D]._private.rscratch.arrowEndX,B[D]._private.rscratch.arrowEndY,this.getArrowWidth(B[D]._private.style.width.value),this.getArrowHeight(B[D]._private.style.width.value),[B[D]._private.rscratch.arrowEndX-B[D].target()[0]._private.position.x,B[D]._private.rscratch.arrowEndY-B[D].target()[0]._private.position.y],0)&&b[B[D]._private.style["target-arrow-shape"].value].collide(A,G,B[D]._private.rscratch.arrowEndX,B[D]._private.rscratch.arrowEndY,this.getArrowWidth(B[D]._private.style.width.value),this.getArrowHeight(B[D]._private.style.width.value),[B[D]._private.rscratch.arrowEndX-B[D].target()[0]._private.position.x,B[D]._private.rscratch.arrowEndY-B[D].target()[0]._private.position.y],0))){E.push(B[D])
}}}E.sort(function(H,i){var J=i._private.style["z-index"].value-H._private.style["z-index"].value;var I=i._private.data.id.localeCompare(H._private.data.id);var K=(function(M,L){if(M.isEdge()&&L.isNode()){return 1}else{if(M.isNode()&&L.isEdge()){return -1}}return 0})(H,i);return J||K||I});if(E.length>0){return E[0]}else{return null}};t.prototype.getAllInBox=function(C,M,A,L){var H=this.data;var B=this.getCachedNodes();var F=this.getCachedEdges();var I=[];var K=Math.min(C,A);var E=Math.max(C,A);var N=Math.min(M,L);
var J=Math.max(M,L);C=K;A=E;M=N;L=J;var D;for(var G=0;G<B.length;G++){if(n[B[G]._private.style.shape.value].intersectBox(C,M,A,L,B[G]._private.style.width.value,B[G]._private.style.height.value,B[G]._private.position.x,B[G]._private.position.y,B[G]._private.style["border-width"].value/2)){I.push(B[G])}}for(var G=0;G<F.length;G++){if(F[G]._private.rscratch.isSelfEdge){if((D=this.boxInBezierVicinity(C,M,A,L,F[G]._private.rscratch.startX,F[G]._private.rscratch.startY,F[G]._private.rscratch.cp2ax,F[G]._private.rscratch.cp2ay,F[G]._private.rscratch.endX,F[G]._private.rscratch.endY,F[G]._private.style.width.value))&&(D==2||(D==1&&this.checkBezierCrossesBox(C,M,A,L,F[G]._private.rscratch.startX,F[G]._private.rscratch.startY,F[G]._private.rscratch.cp2ax,F[G]._private.rscratch.cp2ay,F[G]._private.rscratch.endX,F[G]._private.rscratch.endY,F[G]._private.style.width.value)))||(D=this.boxInBezierVicinity(C,M,A,L,F[G]._private.rscratch.startX,F[G]._private.rscratch.startY,F[G]._private.rscratch.cp2cx,F[G]._private.rscratch.cp2cy,F[G]._private.rscratch.endX,F[G]._private.rscratch.endY,F[G]._private.style.width.value))&&(D==2||(D==1&&this.checkBezierCrossesBox(C,M,A,L,F[G]._private.rscratch.startX,F[G]._private.rscratch.startY,F[G]._private.rscratch.cp2cx,F[G]._private.rscratch.cp2cy,F[G]._private.rscratch.endX,F[G]._private.rscratch.endY,F[G]._private.style.width.value)))){I.push(F[G])
}}if(F[G]._private.rscratch.isBezierEdge&&(D=this.boxInBezierVicinity(C,M,A,L,F[G]._private.rscratch.startX,F[G]._private.rscratch.startY,F[G]._private.rscratch.cp2x,F[G]._private.rscratch.cp2y,F[G]._private.rscratch.endX,F[G]._private.rscratch.endY,F[G]._private.style.width.value))&&(D==2||(D==1&&this.checkBezierCrossesBox(C,M,A,L,F[G]._private.rscratch.startX,F[G]._private.rscratch.startY,F[G]._private.rscratch.cp2x,F[G]._private.rscratch.cp2y,F[G]._private.rscratch.endX,F[G]._private.rscratch.endY,F[G]._private.style.width.value)))){I.push(F[G])
}if(F[G]._private.rscratch.isStraightEdge&&(D=this.boxInBezierVicinity(C,M,A,L,F[G]._private.rscratch.startX,F[G]._private.rscratch.startY,F[G]._private.rscratch.startX*0.5+F[G]._private.rscratch.endX*0.5,F[G]._private.rscratch.startY*0.5+F[G]._private.rscratch.endY*0.5,F[G]._private.rscratch.endX,F[G]._private.rscratch.endY,F[G]._private.style.width.value))&&(D==2||(D==1&&this.checkStraightEdgeCrossesBox(C,M,A,L,F[G]._private.rscratch.startX,F[G]._private.rscratch.startY,F[G]._private.rscratch.endX,F[G]._private.rscratch.endY,F[G]._private.style.width.value)))){I.push(F[G])
}}return I};t.prototype.matchCanvasSize=function(B){var F=this.data;var E=B.clientWidth;var A=B.clientHeight;var C;for(var D=0;D<5;D++){C=F.canvases[D];if(C.width!==E||C.height!==A){C.width=E;C.height=A}}for(var D=0;D<2;D++){C=F.bufferCanvases[D];if(C.width!==E||C.height!==A){C.width=E;C.height=A}}};t.prototype.redraw=function(){var D=this.data.cy;var F=this.data;var B=this.getCachedNodes();var E=this.getCachedEdges();this.matchCanvasSize(F.container);var A=B.add(E).toArray();if(F.canvasNeedsRedraw[d]||F.canvasNeedsRedraw[z]){this.findEdgeControlPoints(E);
A.sort(function(L,K){var J=L._private.style["z-index"].value-K._private.style["z-index"].value;if(J==0){if(L._private.group=="nodes"&&K._private.group=="edges"){return 1}else{if(L._private.group=="edges"&&K._private.group=="nodes"){return -1}}}return 0})}if(F.canvasNeedsRedraw[z]){var C=F.canvases[4].getContext("2d");C.setTransform(1,0,0,1,0,0);C.clearRect(0,0,C.canvas.width,C.canvas.height);C.translate(D.pan().x,D.pan().y);C.scale(D.zoom(),D.zoom());var G;for(var H=0;H<A.length;H++){G=A[H];if(!G._private.rscratch.inDragLayer){if(G._private.group=="nodes"){this.drawNode(C,G)
}else{if(G._private.group=="edges"){this.drawEdge(C,G)}}}}for(var H=0;H<A.length;H++){G=A[H];if(!G._private.rscratch.inDragLayer){if(G._private.group=="nodes"){this.drawNodeText(C,G)}else{if(G._private.group=="edges"){this.drawEdgeText(C,G)}}}}F.canvasNeedsRedraw[z]=false;F.canvasRedrawReason[z]=[]}if(F.canvasNeedsRedraw[d]){var C=F.canvases[2].getContext("2d");C.setTransform(1,0,0,1,0,0);C.clearRect(0,0,C.canvas.width,C.canvas.height);C.translate(D.pan().x,D.pan().y);C.scale(D.zoom(),D.zoom());var G;
for(var H=0;H<A.length;H++){G=A[H];if(G._private.rscratch.inDragLayer){if(G._private.group=="nodes"){this.drawNode(C,G)}else{if(G._private.group=="edges"){this.drawEdge(C,G)}}}}for(var H=0;H<A.length;H++){G=A[H];if(G._private.rscratch.inDragLayer){if(G._private.group=="nodes"){this.drawNodeText(C,G)}else{if(G._private.group=="edges"){this.drawEdgeText(C,G)}}}}F.canvasNeedsRedraw[d]=false;F.canvasRedrawReason[d]=[]}if(F.canvasNeedsRedraw[w]){var C=F.canvases[0].getContext("2d");C.setTransform(1,0,0,1,0,0);
C.clearRect(0,0,C.canvas.width,C.canvas.height);C.translate(D.pan().x,D.pan().y);C.scale(D.zoom(),D.zoom());if(F.select[4]==1){var I=D.style()._private.coreStyle;var i=I["selection-box-border-width"].value/F.cy.zoom();C.lineWidth=i;C.fillStyle="rgba("+I["selection-box-color"].value[0]+","+I["selection-box-color"].value[1]+","+I["selection-box-color"].value[2]+","+I["selection-box-opacity"].value+")";C.fillRect(F.select[0],F.select[1],F.select[2]-F.select[0],F.select[3]-F.select[1]);if(i>0){C.strokeStyle="rgba("+I["selection-box-border-color"].value[0]+","+I["selection-box-border-color"].value[1]+","+I["selection-box-border-color"].value[2]+","+I["selection-box-opacity"].value+")";
C.strokeRect(F.select[0],F.select[1],F.select[2]-F.select[0],F.select[3]-F.select[1])}}F.canvasNeedsRedraw[w]=false;F.canvasRedrawReason[w]=[]}var C;if(this.data.container.clientHeight>0&&this.data.container.clientWidth>0){C=F.bufferCanvases[1].getContext("2d");C.globalCompositeOperation="copy";C.drawImage(F.canvases[4],0,0);C.globalCompositeOperation="source-over";C.drawImage(F.canvases[2],0,0);C.drawImage(F.canvases[0],0,0);C=F.bufferCanvases[0].getContext("2d");C.globalCompositeOperation="copy";
C.drawImage(F.bufferCanvases[1],0,0)}};var j={};var g=30*300;t.prototype.getCachedImage=function(A,B){if(j[A]&&j[A].image){j[A].keepTime=g;return j[A].image}var i=j[A];if(i==undefined){j[A]=new Object();j[A].image=new Image();j[A].image.onload=B;j[A].image.src=A;j[A].keepTime=g;i=j[A]}return i.image};t.prototype.swapCachedImage=function(A){if(j[A]){if(j[A].image&&j[A].image.complete){var B=j[A].image;var i=document.createElement("canvas");i.width=B.width;i.height=B.height;i.getContext("2d").drawImage(B,0,0);
j[A].image=i;j[A].swappedWithCanvas=true;return i}else{return null}}else{return null}};t.prototype.updateImageCaches=function(){for(var i in j){if(j[i].keepTime<=0){if(j[i].image!=undefined){j[i].image.src=undefined;j[i].image=undefined}j[i]=undefined}else{j[i]-=1}}};t.prototype.drawImage=function(i,G,F,D,C,H,B){B.widthScale=0.5;B.heightScale=0.5;B.rotate=H;var E;var A;canvas.drawImage(B,G,F)};t.prototype.drawEdge=function(A,C){var D,H;D=C.source()[0];H=C.target()[0];if(C._private.style.visibility.value!="visible"||D._private.style.visibility.value!="visible"||H._private.style.visibility.value!="visible"){return
}A.strokeStyle="rgba("+C._private.style["line-color"].value[0]+","+C._private.style["line-color"].value[1]+","+C._private.style["line-color"].value[2]+","+C._private.style.opacity.value+")";if(C._private.style.width.value<=0){return}A.lineWidth=C._private.style.width.value;this.findEndpoints(C);if(C._private.rscratch.isSelfEdge){var i=C._private.rscratch;this.drawStyledEdge(A,[i.startX,i.startY,i.cp2ax,i.cp2ay,i.selfEdgeMidX,i.selfEdgeMidY],C._private.style["line-style"].value,C._private.style.width.value);
this.drawStyledEdge(A,[i.selfEdgeMidX,i.selfEdgeMidY,i.cp2cx,i.cp2cy,i.endX,i.endY],C._private.style["line-style"].value,C._private.style.width.value)}else{if(C._private.rscratch.isStraightEdge){var E=H._private.position.x-D._private.position.x;var B=H._private.position.y-D._private.position.y;var G=C._private.rscratch.endX-C._private.rscratch.startX;var F=C._private.rscratch.endY-C._private.rscratch.startY;if(E*G+B*F<0){C._private.rscratch.straightEdgeTooShort=true}else{var i=C._private.rscratch;
this.drawStyledEdge(A,[i.startX,i.startY,i.endX,i.endY],C._private.style["line-style"].value,C._private.style.width.value);C._private.rscratch.straightEdgeTooShort=false}}else{var i=C._private.rscratch;this.drawStyledEdge(A,[i.startX,i.startY,i.cp2x,i.cp2y,i.endX,i.endY],C._private.style["line-style"].value,C._private.style.width.value)}}if(C._private.rscratch.noArrowPlacement!==true&&C._private.rscratch.startX!==undefined){this.drawArrowheads(A,C)}};var r=function(I,E,C){var B=Math.sqrt(Math.pow(I[4]-I[0],2)+Math.pow(I[5]-I[1],2));
B+=Math.sqrt(Math.pow((I[4]+I[0])/2-I[2],2)+Math.pow((I[5]+I[1])/2-I[3],2));var H=Math.ceil(B/E);var A=B/E;var F;if(H>0){F=new Array(H*2)}else{return null}for(var D=0;D<H;D++){var G=D/H;F[D*2]=I[0]*(1-G)*(1-G)+2*(I[2])*(1-G)*G+I[4]*(G)*(G);F[D*2+1]=I[1]*(1-G)*(1-G)+2*(I[3])*(1-G)*G+I[5]*(G)*(G)}return F};var p=function(I,E,C){var B=Math.sqrt(Math.pow(I[2]-I[0],2)+Math.pow(I[3]-I[1],2));var H=Math.ceil(B/E);var F;if(H>0){F=new Array(H*2)}else{return null}var A=[I[2]-I[0],I[3]-I[1]];for(var D=0;D<H;
D++){var G=D/H;F[D*2]=A[0]*G+I[0];F[D*2+1]=A[1]*G+I[1]}return F};var o=function(B,i,A){pt1=_genpts(B,i);pt2=_genpts(B,A)};t.prototype.createBuffer=function(A,B){var i=document.createElement("canvas");i.width=A;i.height=B;return[i,i.getContext("2d")]};t.prototype.drawStyledEdge=function(D,O,K,C){var N=this.data.cy.zoom();if(K=="solid"){D.beginPath();D.moveTo(O[0],O[1]);if(O.length==3*2){D.quadraticCurveTo(O[2],O[3],O[4],O[5])}else{D.lineTo(O[2],O[3])}D.stroke()}else{if(K=="dotted"){var P;if(O.length==3*2){P=r(O,16,true)
}else{P=p(O,16,true)}if(!P){return}var M=Math.max(C*1.6,3.4)*N;var J=M*2,F=M*2;var H=this.createBuffer(J,F);var E=H[1];E.setTransform(1,0,0,1,0,0);E.clearRect(0,0,J,F);E.fillStyle=D.strokeStyle;E.beginPath();E.arc(M,M,M*0.5,0,Math.PI*2,false);E.fill();D.beginPath();D.save();for(var I=0;I<P.length/2;I++){D.drawImage(H[0],P[I*2]-J/2/N,P[I*2+1]-F/2/N,J/N,F/N)}D.restore()}else{if(K=="dashed"){var P;if(O.length==3*2){P=r(O,13,true)}else{P=p(O,13,true)}if(!P){return}var J=C*2*N,F=C*1.7*N;var H=this.createBuffer(J,F);
var E=H[1];E.setTransform(1,0,0,1,0,0);E.clearRect(0,0,J,F);if(D.strokeStyle){E.strokeStyle=D.strokeStyle}E.beginPath();E.moveTo(J/2,F*0.2);E.lineTo(J/2,F*0.8);E.stroke();D.save();var B=false;var L,G;if(O.length==2*2){L=[O[2]-O[0],O[3]-P[1]];G=Math.acos((L[0]*0+L[1]*-1)/Math.sqrt(L[0]*L[0]+L[1]*L[1]));if(L[0]<0){G=-G+2*Math.PI}}else{if(O.length==3*2){B=true}}for(var I=0;I<P.length/2;I++){var A=I/(Math.max(P.length/2-1,1));if(B){L=[2*(1-A)*(O[2]-O[0])+2*A*(O[4]-O[2]),2*(1-A)*(O[3]-O[1])+2*A*(O[5]-O[3])];
G=Math.acos((L[0]*0+L[1]*-1)/Math.sqrt(L[0]*L[0]+L[1]*L[1]));if(L[0]<0){G=-G+2*Math.PI}}D.translate(P[I*2],P[I*2+1]);D.rotate(G);D.translate(-J/2/N,-F/2/N);D.drawImage(H[0],0,0,J/N,F/N);D.translate(J/2/N,F/2/N);D.rotate(-G);D.translate(-P[I*2],-P[I*2+1])}D.restore()}else{this.drawStyledEdge(D,O,"solid",C)}}}};t.prototype.drawEdgeText=function(B,E){if(E._private.style.visibility.value!="visible"){return}B.textAlign="center";B.textBaseline="middle";var A,i;var D,C;if(E._private.rscratch.isSelfEdge){D=E._private.rscratch.selfEdgeMidX;
C=E._private.rscratch.selfEdgeMidY}else{if(E._private.rscratch.isStraightEdge&&!E._private.rscratch.isBezierEdge){D=(E._private.rscratch.startX+E._private.rscratch.endX)/2;C=(E._private.rscratch.startY+E._private.rscratch.endY)/2}else{if(E._private.rscratch.isBezierEdge&&!E._private.rscratch.isStraightEdge){D=0.25*E._private.rscratch.startX+2*0.5*0.5*E._private.rscratch.cp2x+(0.5*0.5)*E._private.rscratch.endX;C=Math.pow(1-0.5,2)*E._private.rscratch.startY+2*(1-0.5)*0.5*E._private.rscratch.cp2y+(0.5*0.5)*E._private.rscratch.endY
}}}A=D;i=C;this.drawText(B,E,A,i)};t.prototype.drawNode=function(B,D){var i,E;if(D._private.style.visibility.value!="visible"){return}B.fillStyle="rgba("+D._private.style["background-color"].value[0]+","+D._private.style["background-color"].value[1]+","+D._private.style["background-color"].value[2]+","+(D._private.style["background-opacity"].value*D._private.style.opacity.value)+")";B.strokeStyle="rgba("+D._private.style["border-color"].value[0]+","+D._private.style["border-color"].value[1]+","+D._private.style["border-color"].value[2]+","+(D._private.style["border-opacity"].value*D._private.style.opacity.value)+")";
i=D._private.style.width.value;E=D._private.style.height.value;var A=D._private.style["background-image"].value[2]||D._private.style["background-image"].value[1];if(A!=undefined){var C=this;var F=this.getCachedImage(A,function(){C.data.canvasNeedsRedraw[z]=true;C.data.canvasRedrawReason[z].push("image finished load");C.data.canvasNeedsRedraw[d]=true;C.data.canvasRedrawReason[d].push("image finished load");C.swapCachedImage(A);C.redraw()});if(F.complete==false){n[D._private.style.shape.value].drawPath(B,D._private.position.x,D._private.position.y,D._private.style.width.value,D._private.style.height.value);
B.stroke();B.fillStyle="#555555";B.fill()}else{this.drawInscribedImage(B,F,D)}}else{n[D._private.style.shape.value].draw(B,D._private.position.x,D._private.position.y,i,E)}B.lineWidth=D._private.style["border-width"].value;if(D._private.style["border-width"].value>0){B.stroke()}};t.prototype.drawInscribedImage=function(A,F,D){var H=this.data.cy._private.zoom;var C=D._private.position.x;var B=D._private.position.y;var G=D._private.style.width.value;var i=D._private.style.height.value;A.save();n[D._private.style.shape.value].drawPath(A,C,B,G,i);
A.clip();var E=[F.width,F.height];A.drawImage(F,C-E[0]/2,B-E[1]/2,E[0],E[1]);A.restore();A.stroke()};t.prototype.drawNodeText=function(D,F){if(F._private.style.visibility.value!="visible"){return}var B,i;var A=F._private.style.width.value;var G=F._private.style.height.value;var E=F._private.style["text-halign"].strValue;if(E=="left"){D.textAlign="right";B=F._private.position.x-A/2}else{if(E=="right"){D.textAlign="left";B=F._private.position.x+A/2}else{if(E=="center"){D.textAlign="center";B=F._private.position.x
}else{D.textAlign="center";B=F._private.position.x}}}var C=F._private.style["text-valign"].strValue;if(C=="top"){D.textBaseline="bottom";i=F._private.position.y-G/2}else{if(C=="bottom"){D.textBaseline="top";i=F._private.position.y+G/2}else{if(C=="middle"||C=="center"){D.textBaseline="middle";i=F._private.position.y}else{D.textBaseline="middle";i=F._private.position.y}}}this.drawText(D,F,B,i)};t.prototype.drawText=function(i,D,F,E){var I=D._private.style["font-style"].strValue;var C=D._private.style["font-size"].strValue;
var K=D._private.style["font-family"].strValue;var H=D._private.style["font-variant"].strValue;var A=D._private.style["font-weight"].strValue;i.font=I+" "+H+" "+A+" "+C+" "+K;var J=String(D._private.style.content.value);var B=D._private.style["text-transform"].value;if(B=="none"){}else{if(B=="uppercase"){J=J.toUpperCase()}else{if(B=="lowercase"){J=J.toLowerCase()}}}i.fillStyle="rgba("+D._private.style.color.value[0]+","+D._private.style.color.value[1]+","+D._private.style.color.value[2]+","+(D._private.style["text-opacity"].value*D._private.style.opacity.value)+")";
i.strokeStyle="rgba("+D._private.style["text-outline-color"].value[0]+","+D._private.style["text-outline-color"].value[1]+","+D._private.style["text-outline-color"].value[2]+","+(D._private.style["text-opacity"].value*D._private.style.opacity.value)+")";if(J!=undefined){if(isNaN(F)){F=0}if(isNaN(E)){E=0}i.fillText(""+J,F,E)}var G=D._private.style["text-outline-width"].value;if(G>0){i.lineWidth=G;i.strokeText(J,F,E)}};t.prototype.drawBackground=function(B,A,i,C,D){};t.prototype.findEdgeControlPoints=function(H){var N={};
var F=this.data.cy;var K;for(var I=0;I<H.length;I++){K=H[I]._private.data.source>H[I]._private.data.target?H[I]._private.data.target+H[I]._private.data.source:H[I]._private.data.source+H[I]._private.data.target;if(N[K]==undefined){N[K]=[]}N[K].push(H[I])}var B,G;for(var K in N){B=F.getElementById(N[K][0]._private.data.source);G=F.getElementById(N[K][0]._private.data.target);var M=(B._private.position.x+G._private.position.x)/2;var L=(B._private.position.y+G._private.position.y)/2;var C,A;if(N[K].length>1){C=G._private.position.y-B._private.position.y;
A=B._private.position.x-G._private.position.x;var J=Math.sqrt(C*C+A*A);C/=J;A/=J}var D;for(var I=0;I<N[K].length;I++){D=N[K][I];if(B._private.data.id==G._private.data.id){var O=D._private.style["control-point-step-size"].pxValue;D._private.rscratch.isSelfEdge=true;D._private.rscratch.cp2ax=B._private.position.x;D._private.rscratch.cp2ay=B._private.position.y-(1+Math.pow(B._private.style.height.value,1.12)/100)*O*(I/3+1);D._private.rscratch.cp2cx=B._private.position.x-(1+Math.pow(B._private.style.width.value,1.12)/100)*O*(I/3+1);
D._private.rscratch.cp2cy=B._private.position.y;D._private.rscratch.selfEdgeMidX=(D._private.rscratch.cp2ax+D._private.rscratch.cp2cx)/2;D._private.rscratch.selfEdgeMidY=(D._private.rscratch.cp2ay+D._private.rscratch.cp2cy)/2}else{if(N[K].length%2==1&&I==Math.floor(N[K].length/2)){D._private.rscratch.isStraightEdge=true}else{var O=D._private.style["control-point-step-size"].value;var E=(0.5-N[K].length/2+I)*O;D._private.rscratch.isBezierEdge=true;D._private.rscratch.cp2x=M+C*E;D._private.rscratch.cp2y=L+A*E
}}}}return N};t.prototype.findEndpoints=function(C){var E;var i=C.source()[0];var I=C.target()[0];var N=Math.max(C.source()[0]._private.style.width.value,C.source()[0]._private.style.height.value);var D=Math.max(C.target()[0]._private.style.width.value,C.target()[0]._private.style.height.value);N=0;D/=2;var B=[C.source().position().x,C.source().position().y];var F=[C.target().position().x,C.target().position().y];if(C._private.rscratch.isSelfEdge){var K=[C._private.rscratch.cp2cx,C._private.rscratch.cp2cy];
E=n[I._private.style.shape.value].intersectLine(I._private.position.x,I._private.position.y,I._private.style.width.value,I._private.style.height.value,K[0],K[1],I._private.style["border-width"].value/2);var A=this.shortenIntersection(E,K,b[C._private.style["target-arrow-shape"].value].spacing(C));var J=this.shortenIntersection(E,K,b[C._private.style["target-arrow-shape"].value].gap(C));C._private.rscratch.endX=J[0];C._private.rscratch.endY=J[1];C._private.rscratch.arrowEndX=A[0];C._private.rscratch.arrowEndY=A[1];
var K=[C._private.rscratch.cp2ax,C._private.rscratch.cp2ay];E=n[i._private.style.shape.value].intersectLine(i._private.position.x,i._private.position.y,i._private.style.width.value,i._private.style.height.value,K[0],K[1],i._private.style["border-width"].value/2);var G=this.shortenIntersection(E,K,b[C._private.style["source-arrow-shape"].value].spacing(C));var H=this.shortenIntersection(E,K,b[C._private.style["source-arrow-shape"].value].gap(C));C._private.rscratch.startX=H[0];C._private.rscratch.startY=H[1];
C._private.rscratch.arrowStartX=G[0];C._private.rscratch.arrowStartY=G[1]}else{if(C._private.rscratch.isStraightEdge){E=n[I._private.style.shape.value].intersectLine(I._private.position.x,I._private.position.y,I._private.style.width.value,I._private.style.height.value,i.position().x,i.position().y,I._private.style["border-width"].value/2);if(E.length==0){C._private.rscratch.noArrowPlacement=true}else{C._private.rscratch.noArrowPlacement=false}var A=this.shortenIntersection(E,[i.position().x,i.position().y],b[C._private.style["target-arrow-shape"].value].spacing(C));
var J=this.shortenIntersection(E,[i.position().x,i.position().y],b[C._private.style["target-arrow-shape"].value].gap(C));C._private.rscratch.endX=J[0];C._private.rscratch.endY=J[1];C._private.rscratch.arrowEndX=A[0];C._private.rscratch.arrowEndY=A[1];E=n[i._private.style.shape.value].intersectLine(i._private.position.x,i._private.position.y,i._private.style.width.value,i._private.style.height.value,I.position().x,I.position().y,i._private.style["border-width"].value/2);if(E.length==0){C._private.rscratch.noArrowPlacement=true
}else{C._private.rscratch.noArrowPlacement=false}var G=this.shortenIntersection(E,[I.position().x,I.position().y],b[C._private.style["source-arrow-shape"].value].spacing(C));var H=this.shortenIntersection(E,[I.position().x,I.position().y],b[C._private.style["source-arrow-shape"].value].gap(C));C._private.rscratch.startX=H[0];C._private.rscratch.startY=H[1];C._private.rscratch.arrowStartX=G[0];C._private.rscratch.arrowStartY=G[1]}else{if(C._private.rscratch.isBezierEdge){var K=[C._private.rscratch.cp2x,C._private.rscratch.cp2y];
var M=B[0]*0.25+F[0]*0.25+K[0]*0.5;var L=B[1]*0.25+F[1]*0.25+K[1]*0.5;E=n[I._private.style.shape.value].intersectLine(I._private.position.x,I._private.position.y,I._private.style.width.value,I._private.style.height.value,K[0],K[1],I._private.style["border-width"].value/2);var A=this.shortenIntersection(E,K,b[C._private.style["target-arrow-shape"].value].spacing(C));var J=this.shortenIntersection(E,K,b[C._private.style["target-arrow-shape"].value].gap(C));C._private.rscratch.endX=J[0];C._private.rscratch.endY=J[1];
C._private.rscratch.arrowEndX=A[0];C._private.rscratch.arrowEndY=A[1];E=n[i._private.style.shape.value].intersectLine(i._private.position.x,i._private.position.y,i._private.style.width.value,i._private.style.height.value,K[0],K[1],i._private.style["border-width"].value/2);var G=this.shortenIntersection(E,K,b[C._private.style["source-arrow-shape"].value].spacing(C));var H=this.shortenIntersection(E,K,b[C._private.style["source-arrow-shape"].value].gap(C));C._private.rscratch.startX=H[0];C._private.rscratch.startY=H[1];
C._private.rscratch.arrowStartX=G[0];C._private.rscratch.arrowStartY=G[1]}else{if(C._private.rscratch.isArcEdge){return}}}}};t.prototype.findEdges=function(E){var B=this.getCachedEdges();var D={};var A=[];for(var C=0;C<E.length;C++){D[E[C]._private.data.id]=E[C]}for(var C=0;C<B.length;C++){if(D[B[C]._private.data.source]||D[B[C]._private.data.target]){A.push(B[C])}}return A};t.prototype.intersectLineEllipse=function(J,I,F,E,C,A){var B=F-J;var i=E-I;B/=C;i/=A;var G=Math.sqrt(B*B+i*i);var D=G-1;if(D<0){return[]
}var H=D/G;return[(F-J)*H+J,(E-I)*H+I]};t.prototype.findCircleNearPoint=function(D,C,E,I,H){var A=I-D;var i=H-C;var B=Math.sqrt(A*A+i*i);var G=A/B;var F=i/B;return[D+G*E,C+F*E]};t.prototype.findMaxSqDistanceToOrigin=function(D){var A=0.000001;var C;for(var B=0;B<D.length/2;B++){C=D[B*2]*D[B*2]+D[B*2+1]*D[B*2+1];if(C>A){A=C}}return A};t.prototype.finiteLinesIntersect=function(E,L,C,J,A,I,M,G,K){var F=(M-A)*(L-I)-(G-I)*(E-A);var H=(C-E)*(L-I)-(J-L)*(E-A);var D=(G-I)*(C-E)-(M-A)*(J-L);if(D!=0){var B=F/D;
var i=H/D;if(0<=B&&B<=1&&0<=i&&i<=1){return[E+B*(C-E),L+B*(J-L)]}else{if(!K){return[]}else{return[E+B*(C-E),L+B*(J-L)]}}}else{if(F==0||H==0){if([E,C,M].sort()[1]==M){return[M,G]}if([E,C,A].sort()[1]==A){return[A,I]}if([A,M,C].sort()[1]==C){return[C,J]}return[]}else{return[]}}};t.prototype.boxIntersectEllipse=function(B,K,i,I,J,A,N,F,D){if(i<B){var C=B;B=i;i=C}if(I<K){var L=K;K=I;I=L}var H=[F-A/2-J,D];var M=[F+A/2+J,D];var E=[F,D+N/2+J];var G=[F,D-N/2-J];if(i<H[0]){return false}if(B>M[0]){return false
}if(I<G[1]){return false}if(K>E[1]){return false}if(B<=H[0]&&H[0]<=i&&K<=H[1]&&H[1]<=I){return true}if(B<=M[0]&&M[0]<=i&&K<=M[1]&&M[1]<=I){return true}if(B<=E[0]&&E[0]<=i&&K<=E[1]&&E[1]<=I){return true}if(B<=G[0]&&G[0]<=i&&K<=G[1]&&G[1]<=I){return true}B=(B-F)/(A+J);i=(i-F)/(A+J);K=(K-D)/(N+J);I=(I-D)/(N+J);if(B*B+K*K<=1){return true}if(i*i+K*K<=1){return true}if(i*i+I*I<=1){return true}if(B*B+I*I<=1){return true}return false};t.prototype.boxIntersectPolygon=function(Q,E,O,C,F,L,K,I,G,S,J){if(O<Q){var P=Q;
Q=O;O=P}if(C<E){var D=E;E=C;C=D}var H=new Array(F.length);var R=Math.asin(S[1]/(Math.sqrt(S[0]*S[0]+S[1]*S[1])));if(S[0]<0){R=R+Math.PI/2}else{R=-R-Math.PI/2}var B=Math.cos(-R);var A=Math.sin(-R);for(var N=0;N<H.length/2;N++){H[N*2]=L*(F[N*2]*B-F[N*2+1]*A);H[N*2+1]=K*(F[N*2+1]*B+F[N*2]*A);H[N*2]+=I;H[N*2+1]+=G}var M;if(J>0){var T=v.expandPolygon(H,-J);M=v.joinLines(T)}else{M=H}for(var N=0;N<H.length/2;N++){if(Q<=H[N*2]&&H[N*2]<=O){if(E<=H[N*2+1]&&H[N*2+1]<=C){return true}}}if(v.pointInsidePolygon(Q,E,M,0,0,1,1,0,S)){return true
}else{if(v.pointInsidePolygon(Q,C,M,0,0,1,1,0,S)){return true}else{if(v.pointInsidePolygon(O,C,M,0,0,1,1,0,S)){return true}else{if(v.pointInsidePolygon(O,E,M,0,0,1,1,0,S)){return true}}}}return false};t.prototype.polygonIntersectLine=function(G,F,A,D,B,J,I,H){var R=[];var E;var C=new Array(A.length);for(var N=0;N<C.length/2;N++){C[N*2]=A[N*2]*J+D;C[N*2+1]=A[N*2+1]*I+B}var M;if(H>0){var Q=v.expandPolygon(C,-H);M=v.joinLines(Q)}else{M=C}var L,K,P,O;for(var N=0;N<M.length/2;N++){L=M[N*2];K=M[N*2+1];
if(N<M.length/2-1){P=M[(N+1)*2];O=M[(N+1)*2+1]}else{P=M[0];O=M[1]}E=this.finiteLinesIntersect(G,F,D,B,L,K,P,O);if(E.length!=0){R.push(E[0],E[1])}}return R};t.prototype.shortenIntersection=function(E,D,B){var i=[E[0]-D[0],E[1]-D[1]];var C=Math.sqrt(i[0]*i[0]+i[1]*i[1]);var A=(C-B)/C;if(A<0){return[]}else{return[D[0]+A*i[0],D[1]+A*i[1]]}};b.arrow={_points:[-0.15,-0.3,0,0,0.15,-0.3],collide:function(F,C,B,A,i,H,D,E){var G=b.arrow._points;return c.pointInsidePolygon(F,C,G,B,A,i,H,D,E)},roughCollide:function(A,G,F,C,B,i,E,D){if(typeof(b.arrow._farthestPointSqDistance)=="undefined"){b.arrow._farthestPointSqDistance=c.findMaxSqDistanceToOrigin(b.arrow._points)
}return c.checkInBoundingCircle(A,G,b.arrow._farthestPointSqDistance,0,B,i,F,C)},draw:function(B){var C=b.arrow._points;for(var A=0;A<C.length/2;A++){B.lineTo(C[A*2],C[A*2+1])}},spacing:function(i){return 0},gap:function(i){return i._private.style.width.value*2}};b.triangle=b.arrow;b.none={collide:function(A,G,F,C,B,i,E,D){return false},roughCollide:function(A,G,F,C,B,i,E,D){return false},draw:function(i){},spacing:function(i){return 0},gap:function(i){return 0}};b.circle={_baseRadius:0.15,collide:function(I,F,C,B,i,L,G,H){if(i!=L){var A=Math.asin(G[1]/(Math.sqrt(G[0]*G[0]+G[1]*G[1])));
var K=Math.cos(-A);var E=Math.sin(-A);var D=[I*K-F*E,F*K+I*E];var J=(L+H)/(i+H);F/=J;B/=J;return(Math.pow(C-I,2)+Math.pow(B-F,2)<=Math.pow((i+H)*b.circle._baseRadius,2))}else{return(Math.pow(C-I,2)+Math.pow(B-F,2)<=Math.pow((i+H)*b.circle._baseRadius,2))}},roughCollide:function(A,G,F,C,B,i,E,D){return true},draw:function(i){i.arc(0,0,b.circle._baseRadius,0,Math.PI*2,false)},spacing:function(i){return c.getArrowWidth(i._private.style.width.value)*b.circle._baseRadius},gap:function(i){return i._private.style.width.value*2
}};b.inhibitor={_points:[-0.25,0,-0.25,-0.1,0.25,-0.1,0.25,0],collide:function(F,C,B,A,i,H,D,E){var G=b.inhibitor._points;return c.pointInsidePolygon(F,C,G,B,A,i,H,D,E)},roughCollide:function(A,G,F,C,B,i,E,D){if(typeof(b.inhibitor._farthestPointSqDistance)=="undefined"){b.inhibitor._farthestPointSqDistance=c.findMaxSqDistanceToOrigin(b.inhibitor._points)}return c.checkInBoundingCircle(A,G,b.inhibitor._farthestPointSqDistance,0,B,i,F,C)},draw:function(B){var C=b.inhibitor._points;for(var A=0;A<C.length/2;
A++){B.lineTo(C[A*2],C[A*2+1])}},spacing:function(i){return 4},gap:function(i){return 4}};b.square={_points:[-0.12,0,0.12,0,0.12,-0.24,-0.12,-0.24],collide:function(F,C,B,A,i,H,D,E){var G=b.square._points;return c.pointInsidePolygon(F,C,G,B,A,i,H,D,E)},roughCollide:function(A,G,F,C,B,i,E,D){if(typeof(b.square._farthestPointSqDistance)=="undefined"){b.square._farthestPointSqDistance=c.findMaxSqDistanceToOrigin(b.square._points)}return c.checkInBoundingCircle(A,G,b.square._farthestPointSqDistance,0,B,i,F,C)
},draw:function(B){var C=b.square._points;for(var A=0;A<C.length/2;A++){B.lineTo(C[A*2],C[A*2+1])}},spacing:function(i){return 0},gap:function(i){return i._private.style.width.value*2}};b.diamond={_points:[-0.14,-0.14,0,-0.28,0.14,-0.14,0,0],collide:function(F,C,B,A,i,H,D,E){var G=b.diamond._points;return c.pointInsidePolygon(F,C,G,B,A,i,H,D,E)},roughCollide:function(A,G,F,C,B,i,E,D){if(typeof(b.diamond._farthestPointSqDistance)=="undefined"){b.diamond._farthestPointSqDistance=c.findMaxSqDistanceToOrigin(b.diamond._points)
}return c.checkInBoundingCircle(A,G,b.diamond._farthestPointSqDistance,0,B,i,F,C)},draw:function(i){i.lineTo(-0.14,-0.14);i.lineTo(0,-0.28);i.lineTo(0.14,-0.14);i.lineTo(0,0)},spacing:function(i){return 0},gap:function(i){return i._private.style.width.value*2}};b.tee=b.inhibitor;t.prototype.getArrowWidth=function(i){return Math.max(Math.pow(i*13.37,0.9),29)};t.prototype.getArrowHeight=function(i){return Math.max(Math.pow(i*13.37,0.9),29)};t.prototype.drawArrowheads=function(D,G){var C,B;var A=G._private.rscratch.arrowStartX;
var i=G._private.rscratch.arrowStartY;C=A-G.source().position().x;B=i-G.source().position().y;D.fillStyle="rgba("+G._private.style["source-arrow-color"].value[0]+","+G._private.style["source-arrow-color"].value[1]+","+G._private.style["source-arrow-color"].value[2]+","+G._private.style.opacity.value+")";D.lineWidth=G._private.style.width.value;this.drawArrowShape(D,G._private.style["source-arrow-shape"].value,A,i,C,B);var F=G._private.rscratch.arrowEndX;var E=G._private.rscratch.arrowEndY;C=F-G.target().position().x;
B=E-G.target().position().y;D.fillStyle="rgba("+G._private.style["target-arrow-color"].value[0]+","+G._private.style["target-arrow-color"].value[1]+","+G._private.style["target-arrow-color"].value[2]+","+G._private.style.opacity.value+")";D.lineWidth=G._private.style.width.value;this.drawArrowShape(D,G._private.style["target-arrow-shape"].value,F,E,C,B)};t.prototype.drawArrowShape=function(E,A,i,G,D,B){var F=Math.asin(B/(Math.sqrt(D*D+B*B)));if(D<0){F=F+Math.PI/2}else{F=-(Math.PI/2+F)}E.save();E.translate(i,G);
E.moveTo(0,0);E.rotate(-F);var C=this.getArrowWidth(E.lineWidth);E.scale(C,C);E.beginPath();b[A].draw(E);E.closePath();E.fill();E.restore()};var k=function(F,B){var A=1/F*2*Math.PI;var D=F%2==0?Math.PI/2+A/2:Math.PI/2;D+=B;var E=new Array(F*2);var G;for(var C=0;C<F;C++){G=C*A+D;E[2*C]=Math.cos(G);E[2*C+1]=Math.sin(-G)}return E};var v=c;n.ellipse={draw:function(A,D,C,B,i){n.ellipse.drawPath(A,D,C,B,i);A.fill()},drawPath:function(A,D,C,B,i){A.beginPath();A.save();A.translate(D,C);A.scale(B/2,i/2);A.arc(0,0,1,0,Math.PI*2,false);
A.closePath();A.restore()},intersectLine:function(E,D,C,B,A,G,F){var i=c.intersectLineEllipse(A,G,E,D,C/2+F,B/2+F);return i},intersectBox:function(B,G,i,E,A,H,D,C,F){return t.prototype.boxIntersectEllipse(B,G,i,E,F,A,H,D,C)},checkPointRough:function(A,F,E,B,i,D,C){return true},checkPoint:function(A,F,E,B,i,D,C){A-=D;F-=C;A/=(B+E);F/=(i+E);return(Math.pow(A,2)+Math.pow(F,2)<=1)}};n.triangle={points:k(3,0),draw:function(A,D,C,B,i){v.drawPolygon(A,D,C,B,i,n.triangle.points)},drawPath:function(A,D,C,B,i){v.drawPolygonPath(A,D,C,B,i,n.triangle.points)
},intersectLine:function(D,C,B,A,i,F,E){return v.polygonIntersectLine(i,F,n.triangle.points,D,C,B/2,A/2,E)},intersectBox:function(B,G,i,E,A,I,D,C,F){var H=n.triangle.points;return v.boxIntersectPolygon(B,G,i,E,H,A,I,D,C,[0,-1],F)},checkPointRough:function(A,F,E,B,i,D,C){return v.checkInBoundingBox(A,F,n.triangle.points,E,B,i,D,C)},checkPoint:function(A,F,E,B,i,D,C){return v.pointInsidePolygon(A,F,n.triangle.points,D,C,B,i,[0,-1],E)}};n.square={points:k(4,0),draw:function(A,D,C,B,i){v.drawPolygon(A,D,C,B,i,n.square.points)
},drawPath:function(A,D,C,B,i){v.drawPolygonPath(A,D,C,B,i,n.square.points)},intersectLine:function(D,C,B,A,i,F,E){return v.polygonIntersectLine(i,F,n.square.points,D,C,B/2,A/2,E)},intersectBox:function(B,G,i,E,A,I,D,C,F){var H=n.square.points;return v.boxIntersectPolygon(B,G,i,E,H,A,I,D,C,[0,-1],F)},checkPointRough:function(A,F,E,B,i,D,C){return v.checkInBoundingBox(A,F,n.square.points,E,B,i,D,C)},checkPoint:function(A,F,E,B,i,D,C){return v.pointInsidePolygon(A,F,n.square.points,D,C,B,i,[0,-1],E)
}};n.rectangle=n.square;n.octogon={};n.roundrectangle=n.square;n.roundrectangle2={roundness:4.99,draw:function(B,A,i){if(A<=roundness*2){return}v.drawPolygon(B._private.position.x,B._private.position.y,A,i,nodeSapes.roundrectangle2.points)},intersectLine:function(C,B,A,i,D){return v.findPolygonIntersection(C,B,A,i,D,n.square.points)},intersectBox:function(B,G,i,E,A,I,D,C,F){var H=n.square.points}};n.pentagon={points:k(5,0),draw:function(A,D,C,B,i){v.drawPolygon(A,D,C,B,i,n.pentagon.points)},drawPath:function(A,D,C,B,i){v.drawPolygonPath(A,D,C,B,i,n.pentagon.points)
},intersectLine:function(D,C,B,A,i,F,E){return v.polygonIntersectLine(i,F,n.pentagon.points,D,C,B/2,A/2,E)},intersectBox:function(B,G,i,E,A,I,D,C,F){var H=n.pentagon.points;return v.boxIntersectPolygon(B,G,i,E,H,A,I,D,C,[0,-1],F)},checkPointRough:function(A,F,E,B,i,D,C){return v.checkInBoundingBox(A,F,n.pentagon.points,E,B,i,D,C)},checkPoint:function(A,F,E,B,i,D,C){return v.pointInsidePolygon(A,F,n.pentagon.points,D,C,B,i,[0,-1],E)}};n.hexagon={points:k(6,0),draw:function(A,D,C,B,i){v.drawPolygon(A,D,C,B,i,n.hexagon.points)
},drawPath:function(A,D,C,B,i){v.drawPolygonPath(A,D,C,B,i,n.hexagon.points)},intersectLine:function(D,C,B,A,i,F,E){return v.polygonIntersectLine(i,F,n.hexagon.points,D,C,B/2,A/2,E)},intersectBox:function(B,G,i,E,A,I,D,C,F){var H=n.hexagon.points;return v.boxIntersectPolygon(B,G,i,E,H,A,I,D,C,[0,-1],F)},checkPointRough:function(A,F,E,B,i,D,C){return v.checkInBoundingBox(A,F,n.hexagon.points,E,B,i,D,C)},checkPoint:function(A,F,E,B,i,D,C){return v.pointInsidePolygon(A,F,n.hexagon.points,D,C,B,i,[0,-1],E)
}};n.heptagon={points:k(7,0),draw:function(A,D,C,B,i){v.drawPolygon(A,D,C,B,i,n.heptagon.points)},drawPath:function(A,D,C,B,i){v.drawPolygonPath(A,D,C,B,i,n.heptagon.points)},intersectLine:function(D,C,B,A,i,F,E){return v.polygonIntersectLine(i,F,n.heptagon.points,D,C,B/2,A/2,E)},intersectBox:function(B,G,i,E,A,I,D,C,F){var H=n.heptagon.points;return v.boxIntersectPolygon(B,G,i,E,H,A,I,D,C,[0,-1],F)},checkPointRough:function(A,F,E,B,i,D,C){return v.checkInBoundingBox(A,F,n.heptagon.points,E,B,i,D,C)
},checkPoint:function(A,F,E,B,i,D,C){return v.pointInsidePolygon(A,F,n.heptagon.points,D,C,B,i,[0,-1],E)}};n.octagon={points:k(8,0),draw:function(A,D,C,B,i){v.drawPolygon(A,D,C,B,i,n.octagon.points)},drawPath:function(A,D,C,B,i){v.drawPolygonPath(A,D,C,B,i,n.octagon.points)},intersectLine:function(D,C,B,A,i,F,E){return v.polygonIntersectLine(i,F,n.octagon.points,D,C,B/2,A/2,E)},intersectBox:function(B,G,i,E,A,I,D,C,F){var H=n.octagon.points;return v.boxIntersectPolygon(B,G,i,E,H,A,I,D,C,[0,-1],F)
},checkPointRough:function(A,F,E,B,i,D,C){return v.checkInBoundingBox(A,F,n.octagon.points,E,B,i,D,C)},checkPoint:function(A,F,E,B,i,D,C){return v.pointInsidePolygon(A,F,n.octagon.points,D,C,B,i,[0,-1],E)}};var h=new Array(20);var f=k(5,0);var y=k(5,Math.PI/5);var m=0.5*(3-Math.sqrt(5));m*=1.57;for(var x=0;x<y.length/2;x++){y[x*2]*=m;y[x*2+1]*=m}for(var x=0;x<20/4;x++){h[x*4]=f[x*2];h[x*4+1]=f[x*2+1];h[x*4+2]=y[x*2];h[x*4+3]=y[x*2+1]}n.star5={points:h,draw:function(A,D,C,B,i){v.drawPolygon(A,D,C,B,i,n.star5.points)
},drawPath:function(A,D,C,B,i){v.drawPolygonPath(A,D,C,B,i,n.star5.points)},intersectLine:function(D,C,B,A,i,F,E){return v.polygonIntersectLine(i,F,n.star5.points,D,C,B/2,A/2,E)},intersectBox:function(B,G,i,E,A,I,D,C,F){var H=n.star5.points;return v.boxIntersectPolygon(B,G,i,E,H,A,I,D,C,[0,-1],F)},checkPointRough:function(A,F,E,B,i,D,C){return v.checkInBoundingBox(A,F,n.star5.points,E,B,i,D,C)},checkPoint:function(A,F,E,B,i,D,C){return v.pointInsidePolygon(A,F,n.star5.points,D,C,B,i,[0,-1],E)}};t.prototype.expandPolygon=function(M,C){var D=new Array(M.length*2);
var L,K,J,I;for(var G=0;G<M.length/2;G++){L=M[G*2];K=M[G*2+1];if(G<M.length/2-1){J=M[(G+1)*2];I=M[(G+1)*2+1]}else{J=M[0];I=M[1]}var H=(I-K);var F=-(J-L);var E=Math.sqrt(H*H+F*F);var B=H/E;var A=F/E;D[G*4]=L+B*C;D[G*4+1]=K+A*C;D[G*4+2]=J+B*C;D[G*4+3]=I+A*C}return D};t.prototype.joinLines=function(J){var I=new Array(J.length/2);var L,K,H,G;var E,D,C,B;for(var F=0;F<J.length/4;F++){L=J[F*4];K=J[F*4+1];H=J[F*4+2];G=J[F*4+3];if(F<J.length/4-1){E=J[(F+1)*4];D=J[(F+1)*4+1];C=J[(F+1)*4+2];B=J[(F+1)*4+3]}else{E=J[0];
D=J[1];C=J[2];B=J[3]}var A=this.finiteLinesIntersect(L,K,H,G,E,D,C,B,true);I[F*2]=A[0];I[F*2+1]=A[1]}return I};t.prototype.pointInsidePolygon=function(L,J,F,I,G,P,O,V,N){var H=new Array(F.length);var U=Math.asin(V[1]/(Math.sqrt(V[0]*V[0]+V[1]*V[1])));if(V[0]<0){U=U+Math.PI/2}else{U=-U-Math.PI/2}var C=Math.cos(-U);var A=Math.sin(-U);for(var R=0;R<H.length/2;R++){H[R*2]=P*(F[R*2]*C-F[R*2+1]*A);H[R*2+1]=O*(F[R*2+1]*C+F[R*2]*A);H[R*2]+=I;H[R*2+1]+=G}var Q;if(N>0){var W=v.expandPolygon(H,-N);Q=v.joinLines(W)
}else{Q=H}var T,E,S,D;var B;var K=0;var M=0;for(var R=0;R<Q.length/2;R++){T=Q[R*2];E=Q[R*2+1];if(R+1<Q.length/2){S=Q[(R+1)*2];D=Q[(R+1)*2+1]}else{S=Q[(R+1-Q.length/2)*2];D=Q[(R+1-Q.length/2)*2+1]}if(T==L&&S==L){}else{if((T>=L&&L>=S)||(T<=L&&L<=S)){B=(L-T)/(S-T)*(D-E)+E;if(B>J){K++}if(B<J){M++}}else{continue}}}if(K%2==0){return false}else{return true}};t.prototype.drawPolygonPath=function(D,B,G,F,A,E){D.save();D.translate(B,G);D.beginPath();D.scale(F/2,A/2);D.moveTo(E[0],E[1]);for(var C=1;C<E.length/2;
C++){D.lineTo(E[C*2],E[C*2+1])}D.closePath();D.restore()};t.prototype.drawPolygon=function(B,A,E,D,i,C){this.drawPolygonPath(B,A,E,D,i,C);B.fill()};t.prototype.checkInBoundingCircle=function(A,G,B,F,C,i,E,D){A=(A-E)/(C+F);G=(G-D)/(i+F);return(A*A+G*G)<=B};t.prototype.checkInBoundingBox=function(K,I,L,J,C,M,G,F){var E=L[0],D=L[1];var B=L[0],A=L[1];for(var H=1;H<L.length/2;H++){if(L[H*2]<E){E=L[H*2]}else{if(L[H*2]>B){B=L[H*2]}}if(L[H*2+1]<D){D=L[H*2+1]}else{if(L[H*2+1]>A){A=L[H*2+1]}}}K-=G;I-=F;K/=C;
I/=M;if(K<E){return false}else{if(K>B){return false}}if(I<D){return false}else{if(I>A){return false}}return true};t.prototype.boxInBezierVicinity=function(K,G,Q,H,M,F,L,E,I,C,J){var R=Math.min(K,Q)-J;var O=Math.min(G,H)-J;var P=Math.max(K,Q)+J;var N=Math.max(G,H)+J;if(M>=R&&M<=P&&F>=O&&F<=N){return 2}else{if(I>=R&&I<=P&&C>=O&&C<=N){return 2}else{if(L>=R&&L<=P&&E>=O&&E<=N){return 1}}}var D=Math.min(M,L,I);var B=Math.min(F,E,C);var A=Math.max(M,L,I);var i=Math.max(F,E,C);if(D>P||A<R||B>N||i<O){return 0
}return 1};t.prototype.checkStraightEdgeCrossesBox=function(N,H,U,K,P,D,O,A,M){var V=Math.min(N,U)-M;var S=Math.min(H,K)-M;var T=Math.max(N,U)+M;var R=Math.max(H,K)+M;var E=O-P;var J=P;var Q;var B=A-D;var I=D;var L;if(Math.abs(E)<0.0001){return(P>=V&&P<=T&&Math.min(D,A)<=S&&Math.max(D,A)>=R)}var i=(V-J)/E;if(i>0&&i<=1){Q=B*i+I;if(Q>=S&&Q<=R){return true}}var G=(T-J)/E;if(G>0&&G<=1){Q=B*G+I;if(Q>=S&&Q<=R){return true}}var C=(S-I)/B;if(C>0&&C<=1){L=E*C+J;if(L>=V&&L<=T){return true}}var F=(R-I)/B;if(F>0&&F<=1){L=E*F+J;
if(L>=V&&L<=T){return true}}return false};t.prototype.checkBezierCrossesBox=function(S,E,af,U,M,ao,I,al,G,ai,A){var O=Math.min(S,af)-A;var L=Math.min(E,U)-A;var an=Math.max(S,af)+A;var ak=Math.max(E,U)+A;if(M>=O&&M<=an&&ao>=L&&ao<=ak){return true}else{if(G>=O&&G<=an&&ai>=L&&ai<=ak){return true}}var R=M-2*I+G;var D=-2*M+2*I;var ab=M;var V=[];if(Math.abs(R)<0.0001){var ag=(O-M)/D;var T=(an-M)/D;V.push(ag,T)}else{var Y=D*D-4*R*(ab-O);var P,N;if(Y>0){var Z=Math.sqrt(Y);P=(-D+Z)/(2*R);N=(-D-Z)/(2*R);V.push(P,N)
}var X=D*D-4*R*(ab-an);var K,H;if(X>0){var Z=Math.sqrt(X);K=(-D+Z)/(2*R);H=(-D-Z)/(2*R);V.push(K,H)}}V.sort(function(aq,ap){return aq-ap});var Q=ao-2*al+ai;var B=-2*ao+2*al;var aa=ao;var ae=[];if(Math.abs(Q)<0.0001){var C=(L-ao)/B;var ac=(ak-ao)/B;ae.push(C,ac)}else{var J=B*B-4*Q*(aa-L);var i,am;if(J>0){var Z=Math.sqrt(J);i=(-B+Z)/(2*Q);am=(-B-Z)/(2*Q);ae.push(i,am)}var F=B*B-4*Q*(aa-ak);var aj,ah;if(F>0){var Z=Math.sqrt(F);aj=(-B+Z)/(2*Q);ah=(-B-Z)/(2*Q);ae.push(aj,ah)}}ae.sort(function(aq,ap){return aq-ap
});for(var W=0;W<V.length;W+=2){for(var ad=1;ad<ae.length;ad+=2){if(V[W]<ae[ad]&&ae[ad]>=0&&V[W]<=1&&V[W+1]>ae[ad-1]&&ae[ad-1]<=1&&V[W+1]>=0){return true}}}return false};t.prototype.inBezierVicinity=function(F,E,P,B,O,A,N,i,U){var H=0.25*P+0.5*O+0.25*N;var G=0.25*B+0.5*A+0.25*i;var K,J,S,Q;var D,C,I;var T=function(W,ac,X,V,ab,aa,Y,Z){D=(aa-V)*(W-X)+(X-ab)*(ac-V);C=D*D;sideSquared=(aa-V)*(aa-V)+(X-ab)*(X-ab);if(Z){if(D>0){return false}}else{if(D<0){return false}}return(C/sideSquared>Y)};var M=(H+O)/2;
var L=(G+A)/2;var R=true;if(T(M,L,P,B,O,A,0,R)){R=!R}return(!T(F,E,P,B,O,A,U,R)&&!T(F,E,O,A,N,i,U,R)&&!T(F,E,N,i,P,B,U,R))};t.prototype.solveCubic=function(H,G,F,E,L){G/=H;F/=H;E/=H;var J,A,i,C,K,I,B,D;A=(3*F-(G*G))/9;i=-(27*E)+G*(9*F-2*(G*G));i/=54;J=A*A*A+i*i;L[1]=0;B=(G/3);if(J>0){K=i+Math.sqrt(J);K=((K<0)?-Math.pow(-K,(1/3)):Math.pow(K,(1/3)));I=i-Math.sqrt(J);I=((I<0)?-Math.pow(-I,(1/3)):Math.pow(I,(1/3)));L[0]=-B+K+I;B+=(K+I)/2;L[4]=L[2]=-B;B=Math.sqrt(3)*(-I+K)/2;L[3]=B;L[5]=-B;return}L[5]=L[3]=0;
if(J==0){D=((i<0)?-Math.pow(-i,(1/3)):Math.pow(i,(1/3)));L[0]=-B+2*D;L[4]=L[2]=-(D+B);return}A=-A;C=A*A*A;C=Math.acos(i/Math.sqrt(C));D=2*Math.sqrt(A);L[0]=-B+D*Math.cos(C/3);L[2]=-B+D*Math.cos((C+2*Math.PI)/3);L[4]=-B+D*Math.cos((C+4*Math.PI)/3);return};t.prototype.sqDistanceToQuadraticBezier=function(K,J,P,E,O,D,N,C){var V=1*P*P-4*P*O+2*P*N+4*O*O-4*O*N+N*N+E*E-4*E*D+2*E*C+4*D*D-4*D*C+C*C;var U=1*9*P*O-3*P*P-3*P*N-6*O*O+3*O*N+9*E*D-3*E*E-3*E*C-6*D*D+3*D*C;var S=1*3*P*P-6*P*O+P*N-P*K+2*O*O+2*O*K-N*K+3*E*E-6*E*D+E*C-E*J+2*D*D+2*D*J-C*J;
var R=1*P*O-P*P+P*K-O*K+E*D-E*E+E*J-D*J;u("coefficients: "+V/V+", "+U/V+", "+S/V+", "+R/V);var F=[];this.solveCubic(V,U,S,R,F);var A=1e-7;var T=[];for(var G=0;G<6;G+=2){if(Math.abs(F[G+1])<A&&F[G]>=0&&F[G]<=1){T.push(F[G])}}T.push(1);T.push(0);var B=-1;var Q;var I,H,L;for(var M=0;M<T.length;M++){I=Math.pow(1-T[M],2)*P+2*(1-T[M])*T[M]*O+T[M]*T[M]*N;H=Math.pow(1-T[M],2)*E+2*(1-T[M])*T[M]*D+T[M]*T[M]*C;L=Math.pow(I-K,2)+Math.pow(H-J,2);u("distance for param "+T[M]+": "+Math.sqrt(L));if(B>=0){if(L<B){B=L;
Q=T[M]}}else{B=L;Q=T[M]}}u("given: ( "+K+", "+J+"), ( "+P+", "+E+"), ( "+O+", "+D+"), ( "+N+", "+C+")");u("roots: "+F);u("params: "+T);u("closest param: "+Q);return B};t.prototype.sqDistanceToFiniteLine=function(H,E,A,G,i,F){var B=[H-A,E-G];var K=[i-A,F-G];var C=K[0]*K[0]+K[1]*K[1];var J=B[0]*B[0]+B[1]*B[1];var I=B[0]*K[0]+B[1]*K[1];var D=I*I/C;if(I<0){return J}if(D>C){return(H-i)*(H-i)+(E-F)*(E-F)}return(J-D)};var u=function(){};s("renderer","canvas",t)})(cytoscape);(function(a){var b={ready:function(){},stop:function(){}};
function c(d){this.options=a.util.extend(true,{},b,d)}c.prototype.run=function(){var d=this.options;var e=d.cy;e.nodes().positions(function(){return{x:0,y:0}});e.one("layoutready",d.ready);e.trigger("layoutready");e.one("layoutstop",d.stop);e.trigger("layoutstop")};c.prototype.stop=function(){var d=this.options;cy.one("layoutstop",d.stop);cy.trigger("layoutstop")};a("layout","null",c)})(cytoscape);(function(a){var c={ready:undefined,stop:undefined,fit:true};function b(d){this.options=a.util.extend(true,{},c,d)
}b.prototype.run=function(){var h=this.options;var j=h.cy;var g=j.nodes();var f=j.edges();var e=j.container();var i=e.clientWidth;var d=e.clientHeight;g.positions(function(l,k){if(k.locked()){return false}return{x:Math.round(Math.random()*i),y:Math.round(Math.random()*d)}});j.one("layoutready",h.ready);j.trigger("layoutready");if(h.fit){j.fit()}j.one("layoutstop",h.stop);j.trigger("layoutstop")};b.prototype.stop=function(){};a("layout","random",b)})(cytoscape);(function(a){var c={fit:true,rows:undefined,columns:undefined,ready:undefined,stop:undefined};
function b(d){this.options=a.util.extend({},c,d)}b.prototype.run=function(){var w=options=this.options;var g=w.cy;var t=g.nodes();var f=g.edges();var o=g.container();var s=o.clientWidth;var r=o.clientHeight;if(r==0||s==0){t.positions(function(){return{x:0,y:0}})}else{var h=t.size();var m=Math.sqrt(h*r/s);var l=Math.round(m);var n=Math.round(s/r*m);function k(y){if(y==undefined){return Math.min(l,n)}else{var x=Math.min(l,n);if(x==l){l=y}else{n=y}}}function d(y){if(y==undefined){return Math.max(l,n)
}else{var x=Math.max(l,n);if(x==l){l=y}else{n=y}}}if(options.rows!=null&&options.columns!=null){l=options.rows;n=options.columns}else{if(options.rows!=null&&options.columns==null){l=options.rows;n=Math.ceil(h/l)}else{if(options.rows==null&&options.columns!=null){n=options.columns;l=Math.ceil(h/n)}else{if(n*l>h){var v=k();var p=d();if((v-1)*p>=h){k(v-1)}else{if((p-1)*v>=h){d(p-1)}}}else{while(n*l<h){var v=k();var p=d();if((p+1)*v>=h){d(p+1)}else{k(v+1)}}}}}}var u=s/n;var e=r/l;var j=0;var i=0;t.positions(function(B,A){if(A.locked()){return false
}var z=i*u+u/2;var C=j*e+e/2;i++;if(i>=n){i=0;j++}return{x:z,y:C}})}if(w.fit){g.reset()}g.one("layoutready",w.ready);g.trigger("layoutready");g.one("layoutstop",w.stop);g.trigger("layoutstop")};b.prototype.stop=function(){};a("layout","grid",b)})(cytoscape);(function(a){var c={fit:true,ready:undefined,stop:undefined,positions:undefined,zoom:undefined,pan:undefined};function b(d){this.options=a.util.extend(true,{},c,d)}b.prototype.run=function(){var g=this.options;var i=g.cy;var f=i.nodes();var e=i.edges();
var d=i.container();function h(j){if(g.positions==null){return null}if(g.positions[j._private.data.id]==null){return null}return g.positions[j._private.data.id]}f.positions(function(k,l){var j=h(l);if(l.locked()||j==null){return false}return j});if(g.pan!=null){i.pan(g.pan)}if(g.zoom!=null){i.zoom(g.zoom)}i.one("layoutready",g.ready);i.trigger("layoutready");if(g.fit){i.fit()}i.one("layoutstop",g.stop);i.trigger("layoutstop")};a("layout","preset",b);a("core","presetLayout",function(){var f=this;var d={};
var e={};f.nodes().each(function(g,h){e[h.data("id")]=h.position()});d.positions=e;d.name="preset";d.zoom=f.zoom();d.pan=f.pan();return d})})(cytoscape);(function(a){var b={liveUpdate:true,ready:undefined,stop:undefined,maxSimulationTime:4000,fit:true,padding:[50,50,50,50],ungrabifyWhileSimulating:true,repulsion:undefined,stiffness:undefined,friction:undefined,gravity:true,fps:undefined,precision:undefined,nodeMass:undefined,edgeLength:undefined,stepSize:1,stableEnergy:function(d){var f=d;return(f.max<=0.5)||(f.mean<=0.3)
}};function c(d){this.options=a.util.extend({},b,d)}c.prototype.run=function(){var k=this.options;var j=k.cy;var v=j.nodes();var i=j.edges();var p=j.container();var u=p.clientWidth;var s=p.clientHeight;if(j.nodes().size()<=1){if(k.fit){j.reset()}j.nodes().position({x:Math.round(u/2),y:Math.round(s/2)});j.one("layoutstop",k.stop);j.trigger("layoutstop");j.one("layoutstop",k.stop);j.trigger("layoutstop");return}var m=this.system=arbor.ParticleSystem(k.repulsion,k.stiffness,k.friction,k.gravity,k.fps,k.dt,k.precision);
this.system=m;if(k.liveUpdate&&k.fit){j.reset()}var t=250;var g;var o=false;var f=+new Date;var r={init:function(x){},redraw:function(){var y=m.energy();if(k.stableEnergy!=null&&y!=null&&y.n>0&&k.stableEnergy(y)){m.stop();return}clearTimeout(g);g=setTimeout(w,t);var z=[];m.eachNode(function(F,A){var E=F.name;var C=F.data;var B=C.element;if(B==null){return}var D=B._private.position;if(!B.locked()&&!B.grabbed()){D.x=A.x;D.y=A.y;z.push(B)}});var x=(+new Date-f)>=16;if(k.liveUpdate&&z.length>0&&x){new a.Collection(j,z).rtrigger("position");
f=+new Date}if(!o){o=true;j.one("layoutready",k.ready);j.trigger("layoutready")}}};m.renderer=r;m.screenSize(u,s);m.screenPadding(k.padding[0],k.padding[1],k.padding[2],k.padding[3]);m.screenStep(k.stepSize);function n(x,y){if(y==null){return undefined}else{if(typeof y==typeof function(){}){return y.apply(x,[x._private.data,{nodes:v.length,edges:i.length,element:x}])}else{return y}}}function d(D){var G=D.x;var E=D.y;var H=u;var B=s;var A=-2;var I=2;var F=-2;var z=2;var C=4;return{x:G/H*C+A,y:E/B*C+I}
}var l=function(y){grabbed=this;var z=m.fromScreen(this.position());var x=arbor.Point(z.x,z.y);this.scratch().arbor.p=x;switch(y.type){case"grab":this.scratch().arbor.fixed=true;break;case"dragstop":this.scratch().arbor.fixed=false;this.scratch().arbor.tempMass=1000;break}};v.bind("grab drag dragstop",l);v.each(function(z,A){var C=this._private.data.id;var y=n(this,k.nodeMass);var x=this._private.locked;var B=d({x:A.position().x,y:A.position().y});this.scratch().arbor=m.addNode(C,{element:this,mass:y,fixed:x,x:x?B.x:undefined,y:x?B.y:undefined})
});i.each(function(){var A=this.id();var y=this.source().id();var z=this.target().id();var x=n(this,k.edgeLength);this.scratch().arbor=m.addEdge(y,z,{length:x})});function h(x){if(k.fit){j.fit()}x()}var e=v.filter(":grabbable");if(k.ungrabifyWhileSimulating){e.ungrabify()}var w=function(){if($.browser.msie){h(function(){x()})}else{x()}function x(){if(!k.liveUpdate){if(k.fit){j.reset()}j.nodes().rtrigger("position")}v.unbind("grab drag dragstop",l);if(k.ungrabifyWhileSimulating){e.grabify()}j.one("layoutstop",k.stop);
j.trigger("layoutstop")}};m.start();setTimeout(function(){m.stop()},k.maxSimulationTime)};c.prototype.stop=function(){if(this.system!=null){system.stop()}};a("layout","arbor",c)})(cytoscape);