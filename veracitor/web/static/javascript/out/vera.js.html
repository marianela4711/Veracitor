<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: vera.js</title>
    
    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">
    
    <h1 class="page-title">Source: vera.js</h1>
    
    


    
    <section>
        <article>
            <pre class="prettyprint source"><code>/**
    JavaScript code for the Veracitor project.
    Dependent on the global variable 'vera' recieved from a request made to
    the Veracitor home page.
    @name Vera
    @constructor
    @author John Brynte Turesson
 */
(function () {

    /** The current visible tab. */
    var activeTab;

    /** CSS classes. */
    var CLASSES = {
        'ACTIVE' : 'active'
    };
    
    var SIDE_TAB_WIDTH = 40;
    
    /** The time taken to switch from one tab to another in milliseconds. @inner @private @memberOf Veracitor */
    var TAB_SWITCH_TIME = 300;

    
    $(document).ready(init);
    
    /**
        This function is run when the document is loaded.
        @name Vera#init
        @function
     */
    var init = function () {
        var tab, name;
        
        activeTab = 0;
        
        vera.dom = {};
        
        for(tab in vera.tabs) {
            name = vera.tabs[tab].name.toLowerCase();
        
            // Create pointers to the dom elements
            vera.dom[name] = {};
            // Pointer to the view
            vera.dom[name].view = $("#" + vera.tabs[tab].viewid);
            // Pointer to the menu item
            vera.dom[name].menu = $("#" + vera.tabs[tab].menuid);
            // An index to specify the view position
            vera.dom[name].index = parseInt(tab);
            
            // Add click events
            vera.dom[name].menu.click(menuClick);
            
            // Set the active tab and initialize the tab positions
            if(tab == activeTab) {
                vera.dom[name].view.css({
                    'left' : '0px'
                });
                vera.dom[name].menu.addClass(CLASSES.ACTIVE);
            } else {
                vera.dom[name].view.css({
                    'left' : '100%'
                });
            }
        }
    }
    
    /**
        Handles the event fired when a menu tab is clicked.
        If the current visible tab is to the left of the clicked
        tab it will be animated out from the screen to the left,
        otherwise to the right.
        The clicked tab will be animated in to the screen, following
        the motion of the previous visible tab.
        @name Vera#menuClick
        @function
        @param {Event} evt The fired event.
     */
    var menuClick = function (evt) {
        /** A key in the vera.dom object of tab objects.
            @name Vera#menuClick#tab */
        var tab;
        /** The index of the clicked tab. */
        var clickedTab;

        clickedTab = 0;
        
        // Retrieve the index of the clicked tab
        for(tab in vera.dom) {
            if(vera.dom[tab].menu[0] == evt.target.parentNode) {
                clickedTab = vera.dom[tab].index;
            }
        }
        
        for(tab in vera.dom) {
            // Animate the clicked tab to the center of the screen
            if(vera.dom[tab].index == clickedTab) {
                vera.dom[tab].menu.addClass(CLASSES.ACTIVE);
                
                vera.dom[tab].view.animate({
                    'left' : '0px'
                }, TAB_SWITCH_TIME, null);
            
            // Animate the previous visible tab out of the screen
            } else if(vera.dom[tab].index == activeTab) {
                vera.dom[tab].menu.removeClass(CLASSES.ACTIVE);
                
                vera.dom[tab].view.animate({
                    'left' : (vera.dom[_tab].index &lt; clickedTab) ?
                            '-100%' : '100%'
                }, TAB_SWITCH_TIME, null);
            
            // Move every other tab relative to the clicked tab
            } else {
                vera.dom[tab].menu.removeClass(CLASSES.ACTIVE);
                
                vera.dom[tab].view.css({
                    'left' : (vera.dom[tab].index &lt; clickedTab) ?
                            '-100%' : '100%'
                });
            }
        }
        
        activeTab = clickedTab;
        
        return false;
    }

})();
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Classes</h3><ul><li><a href="Vera.html">Vera</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.2.0-dev</a> on Sun Mar 10 2013 15:10:28 GMT+0100 (CET)
</footer>

<script> prettyPrint(); </script>
</body>
</html>
